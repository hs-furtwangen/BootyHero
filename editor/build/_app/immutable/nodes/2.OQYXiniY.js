import{s as qt,e as at,d as ot,f as Et,i as it,v as et,k as pt,n as Kt,O as jt,P as Re,Q as Ut,w as Wt,R as bt,b as gt,j as _t,l as ct,t as Ie,h as De,p as ne,x as Zt,S as Be,T as St,U as ie,V as Tt,W as Ht,A as Pe,r as Le,X as se}from"../chunks/scheduler.J96yCwxx.js";import{S as Yt,i as Jt,t as xt,g as Qt,c as $t,a as Ot,b as _e,d as ve,m as be,e as ye,f as ae}from"../chunks/index.ta42h63p.js";function Rt(z){return(z==null?void 0:z.length)!==void 0?z:Array.from(z)}function oe(z,a,t){const d=z.slice();return d[10]=a[t],d[12]=t,d}function le(z){let a,t,d;return{c(){a=at("div"),this.h()},l(o){a=ot(o,"DIV",{class:!0,"data-index":!0}),Et(a).forEach(it),this.h()},h(){et(a,"class","one-note svelte-14ylvs8"),et(a,"data-index",z[12]),Ut(a,"beat",z[12]%z[1]==0),Ut(a,"active",z[3].has(z[12])),Wt(a,"width",z[2]+"px")},m(o,s){pt(o,a,s),t||(d=bt(a,"click",z[5]),t=!0)},p(o,s){s&2&&Ut(a,"beat",o[12]%o[1]==0),s&8&&Ut(a,"active",o[3].has(o[12])),s&4&&Wt(a,"width",o[2]+"px")},d(o){o&&it(a),t=!1,d()}}}function Ne(z){let a,t=Rt({length:z[4]}),d=[];for(let o=0;o<t.length;o+=1)d[o]=le(oe(z,t,o));return{c(){a=at("div");for(let o=0;o<d.length;o+=1)d[o].c();this.h()},l(o){a=ot(o,"DIV",{class:!0,id:!0});var s=Et(a);for(let e=0;e<d.length;e+=1)d[e].l(s);s.forEach(it),this.h()},h(){et(a,"class","different-notes svelte-14ylvs8"),et(a,"id",z[0])},m(o,s){pt(o,a,s);for(let e=0;e<d.length;e+=1)d[e]&&d[e].m(a,null)},p(o,[s]){if(s&62){t=Rt({length:o[4]});let e;for(e=0;e<t.length;e+=1){const i=oe(o,t,e);d[e]?d[e].p(i,s):(d[e]=le(i),d[e].c(),d[e].m(a,null))}for(;e<d.length;e+=1)d[e].d(1);d.length=t.length}s&1&&et(a,"id",o[0])},i:Kt,o:Kt,d(o){o&&it(a),jt(d,o)}}}function Fe(z,a,t){let d,o,s,e,{note:i}=a,{section:u}=a,{notesPerBeat:m=8}=a,{noteWidth:c=10}=a;const _=Re();function y(n){let l=n.target.dataset.index;if(l===void 0)return;let g=parseInt(l),f=o*g+u.start;_("note",{index:g,time:f,note:i})}return z.$$set=n=>{"note"in n&&t(0,i=n.note),"section"in n&&t(6,u=n.section),"notesPerBeat"in n&&t(1,m=n.notesPerBeat),"noteWidth"in n&&t(2,c=n.noteWidth)},z.$$.update=()=>{z.$$.dirty&64&&t(8,d=u.end-u.start),z.$$.dirty&66&&t(7,o=1/u.bpm*60/m),z.$$.dirty&384&&t(4,s=Math.floor(d/o)),z.$$.dirty&65&&t(3,e=structuredClone(u.notes[i]))},[i,m,c,e,s,y,u,o,d]}class Ue extends Yt{constructor(a){super(),Jt(this,a,Fe,Ne,qt,{note:0,section:6,notesPerBeat:1,noteWidth:2})}}function he(z,a,t){const d=z.slice();return d[10]=a[t],d}function ue(z,a,t){const d=z.slice();return d[13]=a[t],d}function Me(z,a,t){const d=z.slice();return d[13]=a[t],d}function je(z){let a,t;return{c(){a=at("div"),t=Ie(z[13]),this.h()},l(d){a=ot(d,"DIV",{class:!0});var o=Et(a);t=De(o,z[13]),o.forEach(it),this.h()},h(){et(a,"class","note-label svelte-1hddhkv")},m(d,o){pt(d,a,o),ct(a,t)},p:Kt,d(d){d&&it(a)}}}function ce(z){let a,t;function d(...o){return z[7](z[10],...o)}return a=new Ue({props:{note:z[13],section:z[10],notesPerBeat:we,noteWidth:ke}}),a.$on("note",d),{c(){_e(a.$$.fragment)},l(o){ve(a.$$.fragment,o)},m(o,s){be(a,o,s),t=!0},p(o,s){z=o;const e={};s&1&&(e.section=z[10]),a.$set(e)},i(o){t||(xt(a.$$.fragment,o),t=!0)},o(o){Ot(a.$$.fragment,o),t=!1},d(o){ye(a,o)}}}function de(z){let a,t,d=Rt(["lc","lt","ll","lb","rc","rt","rr","rb"]),o=[];for(let e=0;e<8;e+=1)o[e]=ce(ue(z,d,e));const s=e=>Ot(o[e],1,1,()=>{o[e]=null});return{c(){for(let e=0;e<8;e+=1)o[e].c();a=ne()},l(e){for(let i=0;i<8;i+=1)o[i].l(e);a=ne()},m(e,i){for(let u=0;u<8;u+=1)o[u]&&o[u].m(e,i);pt(e,a,i),t=!0},p(e,i){if(i&9){d=Rt(["lc","lt","ll","lb","rc","rt","rr","rb"]);let u;for(u=0;u<8;u+=1){const m=ue(e,d,u);o[u]?(o[u].p(m,i),xt(o[u],1)):(o[u]=ce(m),o[u].c(),xt(o[u],1),o[u].m(a.parentNode,a))}for(Qt(),u=8;u<8;u+=1)s(u);$t()}},i(e){if(!t){for(let i=0;i<8;i+=1)xt(o[i]);t=!0}},o(e){o=o.filter(Boolean);for(let i=0;i<8;i+=1)Ot(o[i]);t=!1},d(e){e&&it(a),jt(o,e)}}}function We(z){let a,t,d,o,s,e,i,u=Rt(["lc","lt","ll","lb","rc","rt","rr","rb"]),m=[];for(let n=0;n<8;n+=1)m[n]=je(Me(z,u,n));let c=Rt(z[0].sections),_=[];for(let n=0;n<c.length;n+=1)_[n]=de(he(z,c,n));const y=n=>Ot(_[n],1,1,()=>{_[n]=null});return{c(){a=at("div"),t=at("div");for(let n=0;n<8;n+=1)m[n].c();d=gt(),o=at("div");for(let n=0;n<_.length;n+=1)_[n].c();s=gt(),e=at("div"),this.h()},l(n){a=ot(n,"DIV",{id:!0,class:!0});var p=Et(a);t=ot(p,"DIV",{id:!0});var l=Et(t);for(let f=0;f<8;f+=1)m[f].l(l);l.forEach(it),d=_t(p),o=ot(p,"DIV",{id:!0,class:!0});var g=Et(o);for(let f=0;f<_.length;f+=1)_[f].l(g);s=_t(g),e=ot(g,"DIV",{id:!0,class:!0}),Et(e).forEach(it),g.forEach(it),p.forEach(it),this.h()},h(){et(t,"id","row-labels"),et(e,"id","playhead"),et(e,"class","svelte-1hddhkv"),Wt(e,"left",z[1]+"px"),et(o,"id","notes"),et(o,"class","svelte-1hddhkv"),et(a,"id","notes-wrapper"),et(a,"class","svelte-1hddhkv")},m(n,p){pt(n,a,p),ct(a,t);for(let l=0;l<8;l+=1)m[l]&&m[l].m(t,null);ct(a,d),ct(a,o);for(let l=0;l<_.length;l+=1)_[l]&&_[l].m(o,null);ct(o,s),ct(o,e),z[8](o),i=!0},p(n,[p]){if(p&9){c=Rt(n[0].sections);let l;for(l=0;l<c.length;l+=1){const g=he(n,c,l);_[l]?(_[l].p(g,p),xt(_[l],1)):(_[l]=de(g),_[l].c(),xt(_[l],1),_[l].m(o,s))}for(Qt(),l=c.length;l<_.length;l+=1)y(l);$t()}p&2&&Wt(e,"left",n[1]+"px")},i(n){if(!i){for(let p=0;p<c.length;p+=1)xt(_[p]);i=!0}},o(n){_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)Ot(_[p]);i=!1},d(n){n&&it(a),jt(m,n),jt(_,n),z[8](null)}}}let we=8,ke=10;function Ze(z,a,t){let d,o,{layout:s}=a,{time:e}=a;function i(n,p){let l;for(let b of s.sections)if(b.start<=n&&b.end>=n){l=b;break}if(!l)return;l.end-l.start;let g=n-l.start,f=Math.floor(g/d);c(new CustomEvent("anything",{detail:{note:p,index:f}}),l)}let u;function m(n){u&&t(2,u.scrollLeft=n-100,u)}function c(n,p){let{index:l,note:g}=n.detail;console.log("toggle",l,g),p.notes[g].has(l)?p.notes[g].delete(l):p.notes[g].add(l),t(0,s)}const _=(n,p)=>{c(p,n)};function y(n){Zt[n?"unshift":"push"](()=>{u=n,t(2,u)})}return z.$$set=n=>{"layout"in n&&t(0,s=n.layout),"time"in n&&t(4,e=n.time)},z.$$.update=()=>{z.$$.dirty&1&&t(6,d=1/s.sections[0].bpm*60/we),z.$$.dirty&81&&t(1,o=Math.max(0,(e-s.delay/1e3)/d*ke)),z.$$.dirty&2&&m(o)},[s,o,u,c,e,i,d,_,y]}class He extends Yt{constructor(a){super(),Jt(this,a,Ze,We,qt,{layout:0,time:4,setNoteThroughKeys:5})}get setNoteThroughKeys(){return this.$$.ctx[5]}}var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function te(z){return z&&z.__esModule&&Object.prototype.hasOwnProperty.call(z,"default")?z.default:z}function Mt(z){throw new Error('Could not dynamically require "'+z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xe={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(z,a){(function(t){z.exports=t()})(function(){return function t(d,o,s){function e(m,c){if(!o[m]){if(!d[m]){var _=typeof Mt=="function"&&Mt;if(!c&&_)return _(m,!0);if(i)return i(m,!0);var y=new Error("Cannot find module '"+m+"'");throw y.code="MODULE_NOT_FOUND",y}var n=o[m]={exports:{}};d[m][0].call(n.exports,function(p){var l=d[m][1][p];return e(l||p)},n,n.exports,t,d,o,s)}return o[m].exports}for(var i=typeof Mt=="function"&&Mt,u=0;u<s.length;u++)e(s[u]);return e}({1:[function(t,d,o){var s=t("./utils"),e=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(u){for(var m,c,_,y,n,p,l,g=[],f=0,b=u.length,k=b,A=s.getTypeOf(u)!=="string";f<u.length;)k=b-f,_=A?(m=u[f++],c=f<b?u[f++]:0,f<b?u[f++]:0):(m=u.charCodeAt(f++),c=f<b?u.charCodeAt(f++):0,f<b?u.charCodeAt(f++):0),y=m>>2,n=(3&m)<<4|c>>4,p=1<k?(15&c)<<2|_>>6:64,l=2<k?63&_:64,g.push(i.charAt(y)+i.charAt(n)+i.charAt(p)+i.charAt(l));return g.join("")},o.decode=function(u){var m,c,_,y,n,p,l=0,g=0,f="data:";if(u.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var b,k=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===i.charAt(64)&&k--,u.charAt(u.length-2)===i.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=e.uint8array?new Uint8Array(0|k):new Array(0|k);l<u.length;)m=i.indexOf(u.charAt(l++))<<2|(y=i.indexOf(u.charAt(l++)))>>4,c=(15&y)<<4|(n=i.indexOf(u.charAt(l++)))>>2,_=(3&n)<<6|(p=i.indexOf(u.charAt(l++))),b[g++]=m,n!==64&&(b[g++]=c),p!==64&&(b[g++]=_);return b}},{"./support":30,"./utils":32}],2:[function(t,d,o){var s=t("./external"),e=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function m(c,_,y,n,p){this.compressedSize=c,this.uncompressedSize=_,this.crc32=y,this.compression=n,this.compressedContent=p}m.prototype={getContentWorker:function(){var c=new e(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),_=this;return c.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new e(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(c,_,y){return c.pipe(new i).pipe(new u("uncompressedSize")).pipe(_.compressWorker(y)).pipe(new u("compressedSize")).withStreamInfo("compression",_)},d.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,d,o){var s=t("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},o.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,d,o){var s=t("./utils"),e=function(){for(var i,u=[],m=0;m<256;m++){i=m;for(var c=0;c<8;c++)i=1&i?3988292384^i>>>1:i>>>1;u[m]=i}return u}();d.exports=function(i,u){return i!==void 0&&i.length?s.getTypeOf(i)!=="string"?function(m,c,_,y){var n=e,p=y+_;m^=-1;for(var l=y;l<p;l++)m=m>>>8^n[255&(m^c[l])];return-1^m}(0|u,i,i.length,0):function(m,c,_,y){var n=e,p=y+_;m^=-1;for(var l=y;l<p;l++)m=m>>>8^n[255&(m^c.charCodeAt(l))];return-1^m}(0|u,i,i.length,0):0}},{"./utils":32}],5:[function(t,d,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(t,d,o){var s=null;s=typeof Promise<"u"?Promise:t("lie"),d.exports={Promise:s}},{lie:37}],7:[function(t,d,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",e=t("pako"),i=t("./utils"),u=t("./stream/GenericWorker"),m=s?"uint8array":"array";function c(_,y){u.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=y,this.meta={}}o.magic="\b\0",i.inherits(c,u),c.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(m,_.data),!1)},c.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new e[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(y){_.push({data:y,meta:_.meta})}},o.compressWorker=function(_){return new c("Deflate",_)},o.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,d,o){function s(n,p){var l,g="";for(l=0;l<p;l++)g+=String.fromCharCode(255&n),n>>>=8;return g}function e(n,p,l,g,f,b){var k,A,E=n.file,F=n.compression,P=b!==m.utf8encode,U=i.transformTo("string",b(E.name)),I=i.transformTo("string",m.utf8encode(E.name)),W=E.comment,Y=i.transformTo("string",b(W)),x=i.transformTo("string",m.utf8encode(W)),B=I.length!==E.name.length,h=x.length!==W.length,N="",$="",L="",q=E.dir,Z=E.date,tt={crc32:0,compressedSize:0,uncompressedSize:0};p&&!l||(tt.crc32=n.crc32,tt.compressedSize=n.compressedSize,tt.uncompressedSize=n.uncompressedSize);var R=0;p&&(R|=8),P||!B&&!h||(R|=2048);var O=0,J=0;q&&(O|=16),f==="UNIX"?(J=798,O|=function(X,lt){var ft=X;return X||(ft=lt?16893:33204),(65535&ft)<<16}(E.unixPermissions,q)):(J=20,O|=function(X){return 63&(X||0)}(E.dosPermissions)),k=Z.getUTCHours(),k<<=6,k|=Z.getUTCMinutes(),k<<=5,k|=Z.getUTCSeconds()/2,A=Z.getUTCFullYear()-1980,A<<=4,A|=Z.getUTCMonth()+1,A<<=5,A|=Z.getUTCDate(),B&&($=s(1,1)+s(c(U),4)+I,N+="up"+s($.length,2)+$),h&&(L=s(1,1)+s(c(Y),4)+x,N+="uc"+s(L.length,2)+L);var V="";return V+=`
\0`,V+=s(R,2),V+=F.magic,V+=s(k,2),V+=s(A,2),V+=s(tt.crc32,4),V+=s(tt.compressedSize,4),V+=s(tt.uncompressedSize,4),V+=s(U.length,2),V+=s(N.length,2),{fileRecord:_.LOCAL_FILE_HEADER+V+U+N,dirRecord:_.CENTRAL_FILE_HEADER+s(J,2)+V+s(Y.length,2)+"\0\0\0\0"+s(O,4)+s(g,4)+U+N+Y}}var i=t("../utils"),u=t("../stream/GenericWorker"),m=t("../utf8"),c=t("../crc32"),_=t("../signature");function y(n,p,l,g){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=l,this.encodeFileName=g,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(y,u),y.prototype.push=function(n){var p=n.meta.percent||0,l=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,u.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:l?(p+100*(l-g-1))/l:100}}))},y.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var p=this.streamFiles&&!n.file.dir;if(p){var l=e(n,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:l.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(n){this.accumulate=!1;var p=this.streamFiles&&!n.file.dir,l=e(n,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(l.dirRecord),p)this.push({data:function(g){return _.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:l.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var n=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var l=this.bytesWritten-n,g=function(f,b,k,A,E){var F=i.transformTo("string",E(A));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(f,2)+s(f,2)+s(b,4)+s(k,4)+s(F.length,2)+F}(this.dirRecords.length,l,n,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(n){this._sources.push(n);var p=this;return n.on("data",function(l){p.processChunk(l)}),n.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),n.on("error",function(l){p.error(l)}),this},y.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(n){var p=this._sources;if(!u.prototype.error.call(this,n))return!1;for(var l=0;l<p.length;l++)try{p[l].error(n)}catch{}return!0},y.prototype.lock=function(){u.prototype.lock.call(this);for(var n=this._sources,p=0;p<n.length;p++)n[p].lock()},d.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,d,o){var s=t("../compressions"),e=t("./ZipFileWorker");o.generateWorker=function(i,u,m){var c=new e(u.streamFiles,m,u.platform,u.encodeFileName),_=0;try{i.forEach(function(y,n){_++;var p=function(b,k){var A=b||k,E=s[A];if(!E)throw new Error(A+" is not a valid compression method !");return E}(n.options.compression,u.compression),l=n.options.compressionOptions||u.compressionOptions||{},g=n.dir,f=n.date;n._compressWorker(p,l).withStreamInfo("file",{name:y,dir:g,date:f,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(c)}),c.entriesCount=_}catch(y){c.error(y)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,d,o){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new s;for(var i in this)typeof this[i]!="function"&&(e[i]=this[i]);return e}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(e,i){return new s().loadAsync(e,i)},s.external=t("./external"),d.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,d,o){var s=t("./utils"),e=t("./external"),i=t("./utf8"),u=t("./zipEntries"),m=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function _(y){return new e.Promise(function(n,p){var l=y.decompressed.getContentWorker().pipe(new m);l.on("error",function(g){p(g)}).on("end",function(){l.streamInfo.crc32!==y.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}d.exports=function(y,n){var p=this;return n=s.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),c.isNode&&c.isStream(y)?e.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",y,!0,n.optimizedBinaryString,n.base64).then(function(l){var g=new u(n);return g.load(l),g}).then(function(l){var g=[e.Promise.resolve(l)],f=l.files;if(n.checkCRC32)for(var b=0;b<f.length;b++)g.push(_(f[b]));return e.Promise.all(g)}).then(function(l){for(var g=l.shift(),f=g.files,b=0;b<f.length;b++){var k=f[b],A=k.fileNameStr,E=s.resolve(k.fileNameStr);p.file(E,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:n.createFolders}),k.dir||(p.file(E).unsafeOriginalName=A)}return g.zipComment.length&&(p.comment=g.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,d,o){var s=t("../utils"),e=t("../stream/GenericWorker");function i(u,m){e.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(m)}s.inherits(i,e),i.prototype._bindStream=function(u){var m=this;(this._stream=u).pause(),u.on("data",function(c){m.push({data:c,meta:{percent:0}})}).on("error",function(c){m.isPaused?this.generatedError=c:m.error(c)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},i.prototype.pause=function(){return!!e.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!e.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},d.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,d,o){var s=t("readable-stream").Readable;function e(i,u,m){s.call(this,u),this._helper=i;var c=this;i.on("data",function(_,y){c.push(_)||c._helper.pause(),m&&m(y)}).on("error",function(_){c.emit("error",_)}).on("end",function(){c.push(null)})}t("../utils").inherits(e,s),e.prototype._read=function(){this._helper.resume()},d.exports=e},{"../utils":32,"readable-stream":16}],14:[function(t,d,o){d.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,e);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,e)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var e=new Buffer(s);return e.fill(0),e},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,d,o){function s(E,F,P){var U,I=i.getTypeOf(F),W=i.extend(P||{},c);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(E=f(E)),W.createFolders&&(U=g(E))&&b.call(this,U,!0);var Y=I==="string"&&W.binary===!1&&W.base64===!1;P&&P.binary!==void 0||(W.binary=!Y),(F instanceof _&&F.uncompressedSize===0||W.dir||!F||F.length===0)&&(W.base64=!1,W.binary=!0,F="",W.compression="STORE",I="string");var x=null;x=F instanceof _||F instanceof u?F:p.isNode&&p.isStream(F)?new l(E,F):i.prepareContent(E,F,W.binary,W.optimizedBinaryString,W.base64);var B=new y(E,x,W);this.files[E]=B}var e=t("./utf8"),i=t("./utils"),u=t("./stream/GenericWorker"),m=t("./stream/StreamHelper"),c=t("./defaults"),_=t("./compressedObject"),y=t("./zipObject"),n=t("./generate"),p=t("./nodejsUtils"),l=t("./nodejs/NodejsStreamInputAdapter"),g=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var F=E.lastIndexOf("/");return 0<F?E.substring(0,F):""},f=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},b=function(E,F){return F=F!==void 0?F:c.createFolders,E=f(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:F}),this.files[E]};function k(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var F,P,U;for(F in this.files)U=this.files[F],(P=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&E(P,U)},filter:function(E){var F=[];return this.forEach(function(P,U){E(P,U)&&F.push(U)}),F},file:function(E,F,P){if(arguments.length!==1)return E=this.root+E,s.call(this,E,F,P),this;if(k(E)){var U=E;return this.filter(function(W,Y){return!Y.dir&&U.test(W)})}var I=this.files[this.root+E];return I&&!I.dir?I:null},folder:function(E){if(!E)return this;if(k(E))return this.filter(function(I,W){return W.dir&&E.test(I)});var F=this.root+E,P=b.call(this,F),U=this.clone();return U.root=P.name,U},remove:function(E){E=this.root+E;var F=this.files[E];if(F||(E.slice(-1)!=="/"&&(E+="/"),F=this.files[E]),F&&!F.dir)delete this.files[E];else for(var P=this.filter(function(I,W){return W.name.slice(0,E.length)===E}),U=0;U<P.length;U++)delete this.files[P[U].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var F,P={};try{if((P=i.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:e.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");i.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var U=P.comment||this.comment||"";F=n.generateWorker(this,P,U)}catch(I){(F=new u("error")).error(I)}return new m(F,P.type||"string",P.mimeType)},generateAsync:function(E,F){return this.generateInternalStream(E).accumulate(F)},generateNodeStream:function(E,F){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(F)}};d.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,d,o){d.exports=t("stream")},{stream:void 0}],17:[function(t,d,o){var s=t("./DataReader");function e(i){s.call(this,i);for(var u=0;u<this.data.length;u++)i[u]=255&i[u]}t("../utils").inherits(e,s),e.prototype.byteAt=function(i){return this.data[this.zero+i]},e.prototype.lastIndexOfSignature=function(i){for(var u=i.charCodeAt(0),m=i.charCodeAt(1),c=i.charCodeAt(2),_=i.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===u&&this.data[y+1]===m&&this.data[y+2]===c&&this.data[y+3]===_)return y-this.zero;return-1},e.prototype.readAndCheckSignature=function(i){var u=i.charCodeAt(0),m=i.charCodeAt(1),c=i.charCodeAt(2),_=i.charCodeAt(3),y=this.readData(4);return u===y[0]&&m===y[1]&&c===y[2]&&_===y[3]},e.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,u},d.exports=e},{"../utils":32,"./DataReader":18}],18:[function(t,d,o){var s=t("../utils");function e(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}e.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var u,m=0;for(this.checkOffset(i),u=this.index+i-1;u>=this.index;u--)m=(m<<8)+this.byteAt(u);return this.index+=i,m},readString:function(i){return s.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},d.exports=e},{"../utils":32}],19:[function(t,d,o){var s=t("./Uint8ArrayReader");function e(i){s.call(this,i)}t("../utils").inherits(e,s),e.prototype.readData=function(i){this.checkOffset(i);var u=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,u},d.exports=e},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,d,o){var s=t("./DataReader");function e(i){s.call(this,i)}t("../utils").inherits(e,s),e.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},e.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},e.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},e.prototype.readData=function(i){this.checkOffset(i);var u=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,u},d.exports=e},{"../utils":32,"./DataReader":18}],21:[function(t,d,o){var s=t("./ArrayReader");function e(i){s.call(this,i)}t("../utils").inherits(e,s),e.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,u},d.exports=e},{"../utils":32,"./ArrayReader":17}],22:[function(t,d,o){var s=t("../utils"),e=t("../support"),i=t("./ArrayReader"),u=t("./StringReader"),m=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");d.exports=function(_){var y=s.getTypeOf(_);return s.checkSupport(y),y!=="string"||e.uint8array?y==="nodebuffer"?new m(_):e.uint8array?new c(s.transformTo("uint8array",_)):new i(s.transformTo("array",_)):new u(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,d,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,d,o){var s=t("./GenericWorker"),e=t("../utils");function i(u){s.call(this,"ConvertWorker to "+u),this.destType=u}e.inherits(i,s),i.prototype.processChunk=function(u){this.push({data:e.transformTo(this.destType,u.data),meta:u.meta})},d.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,d,o){var s=t("./GenericWorker"),e=t("../crc32");function i(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,s),i.prototype.processChunk=function(u){this.streamInfo.crc32=e(u.data,this.streamInfo.crc32||0),this.push(u)},d.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,d,o){var s=t("../utils"),e=t("./GenericWorker");function i(u){e.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(i,e),i.prototype.processChunk=function(u){if(u){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+u.data.length}e.prototype.processChunk.call(this,u)},d.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,d,o){var s=t("../utils"),e=t("./GenericWorker");function i(u){e.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(c){m.dataIsReady=!0,m.data=c,m.max=c&&c.length||0,m.type=s.getTypeOf(c),m.isPaused||m._tickAndRepeat()},function(c){m.error(c)})}s.inherits(i,e),i.prototype.cleanUp=function(){e.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!e.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,m);break;case"uint8array":u=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":u=this.data.slice(this.index,m)}return this.index=m,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},d.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,d,o){function s(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,i){return this._listeners[e].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,i){if(this._listeners[e])for(var u=0;u<this._listeners[e].length;u++)this._listeners[e][u].call(this,i)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var i=this;return e.on("data",function(u){i.processChunk(u)}),e.on("end",function(){i.end()}),e.on("error",function(u){i.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,i){return this.extraStreamInfo[e]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},d.exports=s},{}],29:[function(t,d,o){var s=t("../utils"),e=t("./ConvertWorker"),i=t("./GenericWorker"),u=t("../base64"),m=t("../support"),c=t("../external"),_=null;if(m.nodestream)try{_=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(p,l){return new c.Promise(function(g,f){var b=[],k=p._internalType,A=p._outputType,E=p._mimeType;p.on("data",function(F,P){b.push(F),l&&l(P)}).on("error",function(F){b=[],f(F)}).on("end",function(){try{var F=function(P,U,I){switch(P){case"blob":return s.newBlob(s.transformTo("arraybuffer",U),I);case"base64":return u.encode(U);default:return s.transformTo(P,U)}}(A,function(P,U){var I,W=0,Y=null,x=0;for(I=0;I<U.length;I++)x+=U[I].length;switch(P){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(Y=new Uint8Array(x),I=0;I<U.length;I++)Y.set(U[I],W),W+=U[I].length;return Y;case"nodebuffer":return Buffer.concat(U);default:throw new Error("concat : unsupported type '"+P+"'")}}(k,b),E);g(F)}catch(P){f(P)}b=[]}).resume()})}function n(p,l,g){var f=l;switch(l){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=l,this._mimeType=g,s.checkSupport(f),this._worker=p.pipe(new e(f)),p.lock()}catch(b){this._worker=new i("error"),this._worker.error(b)}}n.prototype={accumulate:function(p){return y(this,p)},on:function(p,l){var g=this;return p==="data"?this._worker.on(p,function(f){l.call(g,f.data,f.meta)}):this._worker.on(p,function(){s.delay(l,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},p)}},d.exports=n},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,d,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var s=new ArrayBuffer(0);try{o.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var e=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);e.append(s),o.blob=e.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!t("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(t,d,o){for(var s=t("./utils"),e=t("./support"),i=t("./nodejsUtils"),u=t("./stream/GenericWorker"),m=new Array(256),c=0;c<256;c++)m[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;m[254]=m[254]=1;function _(){u.call(this,"utf-8 decode"),this.leftOver=null}function y(){u.call(this,"utf-8 encode")}o.utf8encode=function(n){return e.nodebuffer?i.newBufferFrom(n,"utf-8"):function(p){var l,g,f,b,k,A=p.length,E=0;for(b=0;b<A;b++)(64512&(g=p.charCodeAt(b)))==55296&&b+1<A&&(64512&(f=p.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(f-56320),b++),E+=g<128?1:g<2048?2:g<65536?3:4;for(l=e.uint8array?new Uint8Array(E):new Array(E),b=k=0;k<E;b++)(64512&(g=p.charCodeAt(b)))==55296&&b+1<A&&(64512&(f=p.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(f-56320),b++),g<128?l[k++]=g:(g<2048?l[k++]=192|g>>>6:(g<65536?l[k++]=224|g>>>12:(l[k++]=240|g>>>18,l[k++]=128|g>>>12&63),l[k++]=128|g>>>6&63),l[k++]=128|63&g);return l}(n)},o.utf8decode=function(n){return e.nodebuffer?s.transformTo("nodebuffer",n).toString("utf-8"):function(p){var l,g,f,b,k=p.length,A=new Array(2*k);for(l=g=0;l<k;)if((f=p[l++])<128)A[g++]=f;else if(4<(b=m[f]))A[g++]=65533,l+=b-1;else{for(f&=b===2?31:b===3?15:7;1<b&&l<k;)f=f<<6|63&p[l++],b--;1<b?A[g++]=65533:f<65536?A[g++]=f:(f-=65536,A[g++]=55296|f>>10&1023,A[g++]=56320|1023&f)}return A.length!==g&&(A.subarray?A=A.subarray(0,g):A.length=g),s.applyFromCharCode(A)}(n=s.transformTo(e.uint8array?"uint8array":"array",n))},s.inherits(_,u),_.prototype.processChunk=function(n){var p=s.transformTo(e.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(e.uint8array){var l=p;(p=new Uint8Array(l.length+this.leftOver.length)).set(this.leftOver,0),p.set(l,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=function(b,k){var A;for((k=k||b.length)>b.length&&(k=b.length),A=k-1;0<=A&&(192&b[A])==128;)A--;return A<0||A===0?k:A+m[b[A]]>k?A:k}(p),f=p;g!==p.length&&(e.uint8array?(f=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(f=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:o.utf8decode(f),meta:n.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=_,s.inherits(y,u),y.prototype.processChunk=function(n){this.push({data:o.utf8encode(n.data),meta:n.meta})},o.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,d,o){var s=t("./support"),e=t("./base64"),i=t("./nodejsUtils"),u=t("./external");function m(l){return l}function c(l,g){for(var f=0;f<l.length;++f)g[f]=255&l.charCodeAt(f);return g}t("setimmediate"),o.newBlob=function(l,g){o.checkSupport("blob");try{return new Blob([l],{type:g})}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return f.append(l),f.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(l,g,f){var b=[],k=0,A=l.length;if(A<=f)return String.fromCharCode.apply(null,l);for(;k<A;)g==="array"||g==="nodebuffer"?b.push(String.fromCharCode.apply(null,l.slice(k,Math.min(k+f,A)))):b.push(String.fromCharCode.apply(null,l.subarray(k,Math.min(k+f,A)))),k+=f;return b.join("")},stringifyByChar:function(l){for(var g="",f=0;f<l.length;f++)g+=String.fromCharCode(l[f]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function y(l){var g=65536,f=o.getTypeOf(l),b=!0;if(f==="uint8array"?b=_.applyCanBeUsed.uint8array:f==="nodebuffer"&&(b=_.applyCanBeUsed.nodebuffer),b)for(;1<g;)try{return _.stringifyByChunk(l,f,g)}catch{g=Math.floor(g/2)}return _.stringifyByChar(l)}function n(l,g){for(var f=0;f<l.length;f++)g[f]=l[f];return g}o.applyFromCharCode=y;var p={};p.string={string:m,array:function(l){return c(l,new Array(l.length))},arraybuffer:function(l){return p.string.uint8array(l).buffer},uint8array:function(l){return c(l,new Uint8Array(l.length))},nodebuffer:function(l){return c(l,i.allocBuffer(l.length))}},p.array={string:y,array:m,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return i.newBufferFrom(l)}},p.arraybuffer={string:function(l){return y(new Uint8Array(l))},array:function(l){return n(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:m,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return i.newBufferFrom(new Uint8Array(l))}},p.uint8array={string:y,array:function(l){return n(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:m,nodebuffer:function(l){return i.newBufferFrom(l)}},p.nodebuffer={string:y,array:function(l){return n(l,new Array(l.length))},arraybuffer:function(l){return p.nodebuffer.uint8array(l).buffer},uint8array:function(l){return n(l,new Uint8Array(l.length))},nodebuffer:m},o.transformTo=function(l,g){if(g=g||"",!l)return g;o.checkSupport(l);var f=o.getTypeOf(g);return p[f][l](g)},o.resolve=function(l){for(var g=l.split("/"),f=[],b=0;b<g.length;b++){var k=g[b];k==="."||k===""&&b!==0&&b!==g.length-1||(k===".."?f.pop():f.push(k))}return f.join("/")},o.getTypeOf=function(l){return typeof l=="string"?"string":Object.prototype.toString.call(l)==="[object Array]"?"array":s.nodebuffer&&i.isBuffer(l)?"nodebuffer":s.uint8array&&l instanceof Uint8Array?"uint8array":s.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(l){if(!s[l.toLowerCase()])throw new Error(l+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(l){var g,f,b="";for(f=0;f<(l||"").length;f++)b+="\\x"+((g=l.charCodeAt(f))<16?"0":"")+g.toString(16).toUpperCase();return b},o.delay=function(l,g,f){setImmediate(function(){l.apply(f||null,g||[])})},o.inherits=function(l,g){function f(){}f.prototype=g.prototype,l.prototype=new f},o.extend=function(){var l,g,f={};for(l=0;l<arguments.length;l++)for(g in arguments[l])Object.prototype.hasOwnProperty.call(arguments[l],g)&&f[g]===void 0&&(f[g]=arguments[l][g]);return f},o.prepareContent=function(l,g,f,b,k){return u.Promise.resolve(g).then(function(A){return s.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(E,F){var P=new FileReader;P.onload=function(U){E(U.target.result)},P.onerror=function(U){F(U.target.error)},P.readAsArrayBuffer(A)}):A}).then(function(A){var E=o.getTypeOf(A);return E?(E==="arraybuffer"?A=o.transformTo("uint8array",A):E==="string"&&(k?A=e.decode(A):f&&b!==!0&&(A=function(F){return c(F,s.uint8array?new Uint8Array(F.length):new Array(F.length))}(A))),A):u.Promise.reject(new Error("Can't read the data of '"+l+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,d,o){var s=t("./reader/readerFor"),e=t("./utils"),i=t("./signature"),u=t("./zipEntry"),m=t("./support");function c(_){this.files=[],this.loadOptions=_}c.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+e.pretty(y)+", expected "+e.pretty(_)+")")}},isSignature:function(_,y){var n=this.reader.index;this.reader.setIndex(_);var p=this.reader.readString(4)===y;return this.reader.setIndex(n),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),y=m.uint8array?"uint8array":"array",n=e.transformTo(y,_);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,y,n,p=this.zip64EndOfCentralSize-44;0<p;)_=this.reader.readInt(2),y=this.reader.readInt(4),n=this.reader.readData(y),this.zip64ExtensibleData[_]={id:_,length:y,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,y;for(_=0;_<this.files.length;_++)y=this.files[_],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(_=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var y=_;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===e.MAX_VALUE_16BITS||this.diskWithCentralDirStart===e.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===e.MAX_VALUE_16BITS||this.centralDirRecords===e.MAX_VALUE_16BITS||this.centralDirSize===e.MAX_VALUE_32BITS||this.centralDirOffset===e.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var p=y-n;if(0<p)this.isSignature(y,i.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(_){this.reader=s(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},d.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,d,o){var s=t("./reader/readerFor"),e=t("./utils"),i=t("./compressedObject"),u=t("./crc32"),m=t("./utf8"),c=t("./compressions"),_=t("./support");function y(n,p){this.options=n,this.loadOptions=p}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(n){var p,l;if(n.skip(22),this.fileNameLength=n.readInt(2),l=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(g){for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)&&c[f].magic===g)return c[f];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+e.pretty(this.compressionMethod)+" unknown (inner file : "+e.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,p,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var p=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(p),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),n==0&&(this.dosPermissions=63&this.externalFileAttributes),n==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=s(this.extraFields[1].value);this.uncompressedSize===e.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===e.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===e.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===e.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var p,l,g,f=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<f;)p=n.readInt(2),l=n.readInt(2),g=n.readData(l),this.extraFields[p]={id:p,length:l,value:g};n.setIndex(f)},handleUTF8:function(){var n=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var l=e.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(l)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var f=e.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var p=s(n.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:m.utf8decode(p.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var p=s(n.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:m.utf8decode(p.readData(n.length-5))}return null}},d.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,d,o){function s(p,l,g){this.name=p,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=l,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var e=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),u=t("./utf8"),m=t("./compressedObject"),c=t("./stream/GenericWorker");s.prototype={internalStream:function(p){var l=null,g="string";try{if(!p)throw new Error("No output type specified.");var f=(g=p.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),l=this._decompressWorker();var b=!this._dataBinary;b&&!f&&(l=l.pipe(new u.Utf8EncodeWorker)),!b&&f&&(l=l.pipe(new u.Utf8DecodeWorker))}catch(k){(l=new c("error")).error(k)}return new e(l,g,"")},async:function(p,l){return this.internalStream(p).accumulate(l)},nodeStream:function(p,l){return this.internalStream(p||"nodebuffer").toNodejsStream(l)},_compressWorker:function(p,l){if(this._data instanceof m&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new u.Utf8EncodeWorker)),m.createWorkerFrom(g,p,l)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof c?this._data:new i(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},n=0;n<_.length;n++)s.prototype[_[n]]=y;d.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,d,o){(function(s){var e,i,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var m=0,c=new u(p),_=s.document.createTextNode("");c.observe(_,{characterData:!0}),e=function(){_.data=m=++m%2}}else if(s.setImmediate||s.MessageChannel===void 0)e="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var l=s.document.createElement("script");l.onreadystatechange=function(){p(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},s.document.documentElement.appendChild(l)}:function(){setTimeout(p,0)};else{var y=new s.MessageChannel;y.port1.onmessage=p,e=function(){y.port2.postMessage(0)}}var n=[];function p(){var l,g;i=!0;for(var f=n.length;f;){for(g=n,n=[],l=-1;++l<f;)g[l]();f=n.length}i=!1}d.exports=function(l){n.push(l)!==1||i||e()}}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,d,o){var s=t("immediate");function e(){}var i={},u=["REJECTED"],m=["FULFILLED"],c=["PENDING"];function _(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,f!==e&&l(this,f)}function y(f,b,k){this.promise=f,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function n(f,b,k){s(function(){var A;try{A=b(k)}catch(E){return i.reject(f,E)}A===f?i.reject(f,new TypeError("Cannot resolve promise with itself")):i.resolve(f,A)})}function p(f){var b=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof b=="function")return function(){b.apply(f,arguments)}}function l(f,b){var k=!1;function A(P){k||(k=!0,i.reject(f,P))}function E(P){k||(k=!0,i.resolve(f,P))}var F=g(function(){b(E,A)});F.status==="error"&&A(F.value)}function g(f,b){var k={};try{k.value=f(b),k.status="success"}catch(A){k.status="error",k.value=A}return k}(d.exports=_).prototype.finally=function(f){if(typeof f!="function")return this;var b=this.constructor;return this.then(function(k){return b.resolve(f()).then(function(){return k})},function(k){return b.resolve(f()).then(function(){throw k})})},_.prototype.catch=function(f){return this.then(null,f)},_.prototype.then=function(f,b){if(typeof f!="function"&&this.state===m||typeof b!="function"&&this.state===u)return this;var k=new this.constructor(e);return this.state!==c?n(k,this.state===m?f:b,this.outcome):this.queue.push(new y(k,f,b)),k},y.prototype.callFulfilled=function(f){i.resolve(this.promise,f)},y.prototype.otherCallFulfilled=function(f){n(this.promise,this.onFulfilled,f)},y.prototype.callRejected=function(f){i.reject(this.promise,f)},y.prototype.otherCallRejected=function(f){n(this.promise,this.onRejected,f)},i.resolve=function(f,b){var k=g(p,b);if(k.status==="error")return i.reject(f,k.value);var A=k.value;if(A)l(f,A);else{f.state=m,f.outcome=b;for(var E=-1,F=f.queue.length;++E<F;)f.queue[E].callFulfilled(b)}return f},i.reject=function(f,b){f.state=u,f.outcome=b;for(var k=-1,A=f.queue.length;++k<A;)f.queue[k].callRejected(b);return f},_.resolve=function(f){return f instanceof this?f:i.resolve(new this(e),f)},_.reject=function(f){var b=new this(e);return i.reject(b,f)},_.all=function(f){var b=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=f.length,A=!1;if(!k)return this.resolve([]);for(var E=new Array(k),F=0,P=-1,U=new this(e);++P<k;)I(f[P],P);return U;function I(W,Y){b.resolve(W).then(function(x){E[Y]=x,++F!==k||A||(A=!0,i.resolve(U,E))},function(x){A||(A=!0,i.reject(U,x))})}},_.race=function(f){var b=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=f.length,A=!1;if(!k)return this.resolve([]);for(var E=-1,F=new this(e);++E<k;)P=f[E],b.resolve(P).then(function(U){A||(A=!0,i.resolve(F,U))},function(U){A||(A=!0,i.reject(F,U))});var P;return F}},{immediate:36}],38:[function(t,d,o){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),d.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,d,o){var s=t("./zlib/deflate"),e=t("./utils/common"),i=t("./utils/strings"),u=t("./zlib/messages"),m=t("./zlib/zstream"),c=Object.prototype.toString,_=0,y=-1,n=0,p=8;function l(f){if(!(this instanceof l))return new l(f);this.options=e.assign({level:y,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},f||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var k=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(k!==_)throw new Error(u[k]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var A;if(A=typeof b.dictionary=="string"?i.string2buf(b.dictionary):c.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(k=s.deflateSetDictionary(this.strm,A))!==_)throw new Error(u[k]);this._dict_set=!0}}function g(f,b){var k=new l(b);if(k.push(f,!0),k.err)throw k.msg||u[k.err];return k.result}l.prototype.push=function(f,b){var k,A,E=this.strm,F=this.options.chunkSize;if(this.ended)return!1;A=b===~~b?b:b===!0?4:0,typeof f=="string"?E.input=i.string2buf(f):c.call(f)==="[object ArrayBuffer]"?E.input=new Uint8Array(f):E.input=f,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new e.Buf8(F),E.next_out=0,E.avail_out=F),(k=s.deflate(E,A))!==1&&k!==_)return this.onEnd(k),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(e.shrinkBuf(E.output,E.next_out))):this.onData(e.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&k!==1);return A===4?(k=s.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===_):A!==2||(this.onEnd(_),!(E.avail_out=0))},l.prototype.onData=function(f){this.chunks.push(f)},l.prototype.onEnd=function(f){f===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},o.Deflate=l,o.deflate=g,o.deflateRaw=function(f,b){return(b=b||{}).raw=!0,g(f,b)},o.gzip=function(f,b){return(b=b||{}).gzip=!0,g(f,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,d,o){var s=t("./zlib/inflate"),e=t("./utils/common"),i=t("./utils/strings"),u=t("./zlib/constants"),m=t("./zlib/messages"),c=t("./zlib/zstream"),_=t("./zlib/gzheader"),y=Object.prototype.toString;function n(l){if(!(this instanceof n))return new n(l);this.options=e.assign({chunkSize:16384,windowBits:0,to:""},l||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||l&&l.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var f=s.inflateInit2(this.strm,g.windowBits);if(f!==u.Z_OK)throw new Error(m[f]);this.header=new _,s.inflateGetHeader(this.strm,this.header)}function p(l,g){var f=new n(g);if(f.push(l,!0),f.err)throw f.msg||m[f.err];return f.result}n.prototype.push=function(l,g){var f,b,k,A,E,F,P=this.strm,U=this.options.chunkSize,I=this.options.dictionary,W=!1;if(this.ended)return!1;b=g===~~g?g:g===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof l=="string"?P.input=i.binstring2buf(l):y.call(l)==="[object ArrayBuffer]"?P.input=new Uint8Array(l):P.input=l,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new e.Buf8(U),P.next_out=0,P.avail_out=U),(f=s.inflate(P,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&I&&(F=typeof I=="string"?i.string2buf(I):y.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,f=s.inflateSetDictionary(this.strm,F)),f===u.Z_BUF_ERROR&&W===!0&&(f=u.Z_OK,W=!1),f!==u.Z_STREAM_END&&f!==u.Z_OK)return this.onEnd(f),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&f!==u.Z_STREAM_END&&(P.avail_in!==0||b!==u.Z_FINISH&&b!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=i.utf8border(P.output,P.next_out),A=P.next_out-k,E=i.buf2string(P.output,k),P.next_out=A,P.avail_out=U-A,A&&e.arraySet(P.output,P.output,k,A,0),this.onData(E)):this.onData(e.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(W=!0)}while((0<P.avail_in||P.avail_out===0)&&f!==u.Z_STREAM_END);return f===u.Z_STREAM_END&&(b=u.Z_FINISH),b===u.Z_FINISH?(f=s.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===u.Z_OK):b!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(P.avail_out=0))},n.prototype.onData=function(l){this.chunks.push(l)},n.prototype.onEnd=function(l){l===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},o.Inflate=n,o.inflate=p,o.inflateRaw=function(l,g){return(g=g||{}).raw=!0,p(l,g)},o.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,d,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(u){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var c=m.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var _ in c)c.hasOwnProperty(_)&&(u[_]=c[_])}}return u},o.shrinkBuf=function(u,m){return u.length===m?u:u.subarray?u.subarray(0,m):(u.length=m,u)};var e={arraySet:function(u,m,c,_,y){if(m.subarray&&u.subarray)u.set(m.subarray(c,c+_),y);else for(var n=0;n<_;n++)u[y+n]=m[c+n]},flattenChunks:function(u){var m,c,_,y,n,p;for(m=_=0,c=u.length;m<c;m++)_+=u[m].length;for(p=new Uint8Array(_),m=y=0,c=u.length;m<c;m++)n=u[m],p.set(n,y),y+=n.length;return p}},i={arraySet:function(u,m,c,_,y){for(var n=0;n<_;n++)u[y+n]=m[c+n]},flattenChunks:function(u){return[].concat.apply([],u)}};o.setTyped=function(u){u?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,e)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,i))},o.setTyped(s)},{}],42:[function(t,d,o){var s=t("./common"),e=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var u=new s.Buf8(256),m=0;m<256;m++)u[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function c(_,y){if(y<65537&&(_.subarray&&i||!_.subarray&&e))return String.fromCharCode.apply(null,s.shrinkBuf(_,y));for(var n="",p=0;p<y;p++)n+=String.fromCharCode(_[p]);return n}u[254]=u[254]=1,o.string2buf=function(_){var y,n,p,l,g,f=_.length,b=0;for(l=0;l<f;l++)(64512&(n=_.charCodeAt(l)))==55296&&l+1<f&&(64512&(p=_.charCodeAt(l+1)))==56320&&(n=65536+(n-55296<<10)+(p-56320),l++),b+=n<128?1:n<2048?2:n<65536?3:4;for(y=new s.Buf8(b),l=g=0;g<b;l++)(64512&(n=_.charCodeAt(l)))==55296&&l+1<f&&(64512&(p=_.charCodeAt(l+1)))==56320&&(n=65536+(n-55296<<10)+(p-56320),l++),n<128?y[g++]=n:(n<2048?y[g++]=192|n>>>6:(n<65536?y[g++]=224|n>>>12:(y[g++]=240|n>>>18,y[g++]=128|n>>>12&63),y[g++]=128|n>>>6&63),y[g++]=128|63&n);return y},o.buf2binstring=function(_){return c(_,_.length)},o.binstring2buf=function(_){for(var y=new s.Buf8(_.length),n=0,p=y.length;n<p;n++)y[n]=_.charCodeAt(n);return y},o.buf2string=function(_,y){var n,p,l,g,f=y||_.length,b=new Array(2*f);for(n=p=0;n<f;)if((l=_[n++])<128)b[p++]=l;else if(4<(g=u[l]))b[p++]=65533,n+=g-1;else{for(l&=g===2?31:g===3?15:7;1<g&&n<f;)l=l<<6|63&_[n++],g--;1<g?b[p++]=65533:l<65536?b[p++]=l:(l-=65536,b[p++]=55296|l>>10&1023,b[p++]=56320|1023&l)}return c(b,p)},o.utf8border=function(_,y){var n;for((y=y||_.length)>_.length&&(y=_.length),n=y-1;0<=n&&(192&_[n])==128;)n--;return n<0||n===0?y:n+u[_[n]]>y?n:y}},{"./common":41}],43:[function(t,d,o){d.exports=function(s,e,i,u){for(var m=65535&s|0,c=s>>>16&65535|0,_=0;i!==0;){for(i-=_=2e3<i?2e3:i;c=c+(m=m+e[u++]|0)|0,--_;);m%=65521,c%=65521}return m|c<<16|0}},{}],44:[function(t,d,o){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,d,o){var s=function(){for(var e,i=[],u=0;u<256;u++){e=u;for(var m=0;m<8;m++)e=1&e?3988292384^e>>>1:e>>>1;i[u]=e}return i}();d.exports=function(e,i,u,m){var c=s,_=m+u;e^=-1;for(var y=m;y<_;y++)e=e>>>8^c[255&(e^i[y])];return-1^e}},{}],46:[function(t,d,o){var s,e=t("../utils/common"),i=t("./trees"),u=t("./adler32"),m=t("./crc32"),c=t("./messages"),_=0,y=4,n=0,p=-2,l=-1,g=4,f=2,b=8,k=9,A=286,E=30,F=19,P=2*A+1,U=15,I=3,W=258,Y=W+I+1,x=42,B=113,h=1,N=2,$=3,L=4;function q(r,D){return r.msg=c[D],D}function Z(r){return(r<<1)-(4<r?9:0)}function tt(r){for(var D=r.length;0<=--D;)r[D]=0}function R(r){var D=r.state,C=D.pending;C>r.avail_out&&(C=r.avail_out),C!==0&&(e.arraySet(r.output,D.pending_buf,D.pending_out,C,r.next_out),r.next_out+=C,D.pending_out+=C,r.total_out+=C,r.avail_out-=C,D.pending-=C,D.pending===0&&(D.pending_out=0))}function O(r,D){i._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,D),r.block_start=r.strstart,R(r.strm)}function J(r,D){r.pending_buf[r.pending++]=D}function V(r,D){r.pending_buf[r.pending++]=D>>>8&255,r.pending_buf[r.pending++]=255&D}function X(r,D){var C,w,v=r.max_chain_length,S=r.strstart,M=r.prev_length,j=r.nice_match,T=r.strstart>r.w_size-Y?r.strstart-(r.w_size-Y):0,H=r.window,K=r.w_mask,G=r.prev,Q=r.strstart+W,ut=H[S+M-1],nt=H[S+M];r.prev_length>=r.good_match&&(v>>=2),j>r.lookahead&&(j=r.lookahead);do if(H[(C=D)+M]===nt&&H[C+M-1]===ut&&H[C]===H[S]&&H[++C]===H[S+1]){S+=2,C++;do;while(H[++S]===H[++C]&&H[++S]===H[++C]&&H[++S]===H[++C]&&H[++S]===H[++C]&&H[++S]===H[++C]&&H[++S]===H[++C]&&H[++S]===H[++C]&&H[++S]===H[++C]&&S<Q);if(w=W-(Q-S),S=Q-W,M<w){if(r.match_start=D,j<=(M=w))break;ut=H[S+M-1],nt=H[S+M]}}while((D=G[D&K])>T&&--v!=0);return M<=r.lookahead?M:r.lookahead}function lt(r){var D,C,w,v,S,M,j,T,H,K,G=r.w_size;do{if(v=r.window_size-r.lookahead-r.strstart,r.strstart>=G+(G-Y)){for(e.arraySet(r.window,r.window,G,G,0),r.match_start-=G,r.strstart-=G,r.block_start-=G,D=C=r.hash_size;w=r.head[--D],r.head[D]=G<=w?w-G:0,--C;);for(D=C=G;w=r.prev[--D],r.prev[D]=G<=w?w-G:0,--C;);v+=G}if(r.strm.avail_in===0)break;if(M=r.strm,j=r.window,T=r.strstart+r.lookahead,H=v,K=void 0,K=M.avail_in,H<K&&(K=H),C=K===0?0:(M.avail_in-=K,e.arraySet(j,M.input,M.next_in,K,T),M.state.wrap===1?M.adler=u(M.adler,j,K,T):M.state.wrap===2&&(M.adler=m(M.adler,j,K,T)),M.next_in+=K,M.total_in+=K,K),r.lookahead+=C,r.lookahead+r.insert>=I)for(S=r.strstart-r.insert,r.ins_h=r.window[S],r.ins_h=(r.ins_h<<r.hash_shift^r.window[S+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[S+I-1])&r.hash_mask,r.prev[S&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=S,S++,r.insert--,!(r.lookahead+r.insert<I)););}while(r.lookahead<Y&&r.strm.avail_in!==0)}function ft(r,D){for(var C,w;;){if(r.lookahead<Y){if(lt(r),r.lookahead<Y&&D===_)return h;if(r.lookahead===0)break}if(C=0,r.lookahead>=I&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+I-1])&r.hash_mask,C=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),C!==0&&r.strstart-C<=r.w_size-Y&&(r.match_length=X(r,C)),r.match_length>=I)if(w=i._tr_tally(r,r.strstart-r.match_start,r.match_length-I),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=I){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+I-1])&r.hash_mask,C=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else w=i._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(w&&(O(r,!1),r.strm.avail_out===0))return h}return r.insert=r.strstart<I-1?r.strstart:I-1,D===y?(O(r,!0),r.strm.avail_out===0?$:L):r.last_lit&&(O(r,!1),r.strm.avail_out===0)?h:N}function rt(r,D){for(var C,w,v;;){if(r.lookahead<Y){if(lt(r),r.lookahead<Y&&D===_)return h;if(r.lookahead===0)break}if(C=0,r.lookahead>=I&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+I-1])&r.hash_mask,C=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=I-1,C!==0&&r.prev_length<r.max_lazy_match&&r.strstart-C<=r.w_size-Y&&(r.match_length=X(r,C),r.match_length<=5&&(r.strategy===1||r.match_length===I&&4096<r.strstart-r.match_start)&&(r.match_length=I-1)),r.prev_length>=I&&r.match_length<=r.prev_length){for(v=r.strstart+r.lookahead-I,w=i._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-I),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=v&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+I-1])&r.hash_mask,C=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=I-1,r.strstart++,w&&(O(r,!1),r.strm.avail_out===0))return h}else if(r.match_available){if((w=i._tr_tally(r,0,r.window[r.strstart-1]))&&O(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return h}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(w=i._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<I-1?r.strstart:I-1,D===y?(O(r,!0),r.strm.avail_out===0?$:L):r.last_lit&&(O(r,!1),r.strm.avail_out===0)?h:N}function st(r,D,C,w,v){this.good_length=r,this.max_lazy=D,this.nice_length=C,this.max_chain=w,this.func=v}function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(2*P),this.dyn_dtree=new e.Buf16(2*(2*E+1)),this.bl_tree=new e.Buf16(2*(2*F+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(U+1),this.heap=new e.Buf16(2*A+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*A+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function dt(r){var D;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=f,(D=r.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?x:B,r.adler=D.wrap===2?0:1,D.last_flush=_,i._tr_init(D),n):q(r,p)}function yt(r){var D=dt(r);return D===n&&function(C){C.window_size=2*C.w_size,tt(C.head),C.max_lazy_match=s[C.level].max_lazy,C.good_match=s[C.level].good_length,C.nice_match=s[C.level].nice_length,C.max_chain_length=s[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=I-1,C.match_available=0,C.ins_h=0}(r.state),D}function wt(r,D,C,w,v,S){if(!r)return p;var M=1;if(D===l&&(D=6),w<0?(M=0,w=-w):15<w&&(M=2,w-=16),v<1||k<v||C!==b||w<8||15<w||D<0||9<D||S<0||g<S)return q(r,p);w===8&&(w=9);var j=new ht;return(r.state=j).strm=r,j.wrap=M,j.gzhead=null,j.w_bits=w,j.w_size=1<<j.w_bits,j.w_mask=j.w_size-1,j.hash_bits=v+7,j.hash_size=1<<j.hash_bits,j.hash_mask=j.hash_size-1,j.hash_shift=~~((j.hash_bits+I-1)/I),j.window=new e.Buf8(2*j.w_size),j.head=new e.Buf16(j.hash_size),j.prev=new e.Buf16(j.w_size),j.lit_bufsize=1<<v+6,j.pending_buf_size=4*j.lit_bufsize,j.pending_buf=new e.Buf8(j.pending_buf_size),j.d_buf=1*j.lit_bufsize,j.l_buf=3*j.lit_bufsize,j.level=D,j.strategy=S,j.method=C,yt(r)}s=[new st(0,0,0,0,function(r,D){var C=65535;for(C>r.pending_buf_size-5&&(C=r.pending_buf_size-5);;){if(r.lookahead<=1){if(lt(r),r.lookahead===0&&D===_)return h;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var w=r.block_start+C;if((r.strstart===0||r.strstart>=w)&&(r.lookahead=r.strstart-w,r.strstart=w,O(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-Y&&(O(r,!1),r.strm.avail_out===0))return h}return r.insert=0,D===y?(O(r,!0),r.strm.avail_out===0?$:L):(r.strstart>r.block_start&&(O(r,!1),r.strm.avail_out),h)}),new st(4,4,8,4,ft),new st(4,5,16,8,ft),new st(4,6,32,32,ft),new st(4,4,16,16,rt),new st(8,16,32,32,rt),new st(8,16,128,128,rt),new st(8,32,128,256,rt),new st(32,128,258,1024,rt),new st(32,258,258,4096,rt)],o.deflateInit=function(r,D){return wt(r,D,b,15,8,0)},o.deflateInit2=wt,o.deflateReset=yt,o.deflateResetKeep=dt,o.deflateSetHeader=function(r,D){return r&&r.state?r.state.wrap!==2?p:(r.state.gzhead=D,n):p},o.deflate=function(r,D){var C,w,v,S;if(!r||!r.state||5<D||D<0)return r?q(r,p):p;if(w=r.state,!r.output||!r.input&&r.avail_in!==0||w.status===666&&D!==y)return q(r,r.avail_out===0?-5:p);if(w.strm=r,C=w.last_flush,w.last_flush=D,w.status===x)if(w.wrap===2)r.adler=0,J(w,31),J(w,139),J(w,8),w.gzhead?(J(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),J(w,255&w.gzhead.time),J(w,w.gzhead.time>>8&255),J(w,w.gzhead.time>>16&255),J(w,w.gzhead.time>>24&255),J(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),J(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(J(w,255&w.gzhead.extra.length),J(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(r.adler=m(r.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(J(w,0),J(w,0),J(w,0),J(w,0),J(w,0),J(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),J(w,3),w.status=B);else{var M=b+(w.w_bits-8<<4)<<8;M|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(M|=32),M+=31-M%31,w.status=B,V(w,M),w.strstart!==0&&(V(w,r.adler>>>16),V(w,65535&r.adler)),r.adler=1}if(w.status===69)if(w.gzhead.extra){for(v=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>v&&(r.adler=m(r.adler,w.pending_buf,w.pending-v,v)),R(r),v=w.pending,w.pending!==w.pending_buf_size));)J(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>v&&(r.adler=m(r.adler,w.pending_buf,w.pending-v,v)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){v=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>v&&(r.adler=m(r.adler,w.pending_buf,w.pending-v,v)),R(r),v=w.pending,w.pending===w.pending_buf_size)){S=1;break}S=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,J(w,S)}while(S!==0);w.gzhead.hcrc&&w.pending>v&&(r.adler=m(r.adler,w.pending_buf,w.pending-v,v)),S===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){v=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>v&&(r.adler=m(r.adler,w.pending_buf,w.pending-v,v)),R(r),v=w.pending,w.pending===w.pending_buf_size)){S=1;break}S=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,J(w,S)}while(S!==0);w.gzhead.hcrc&&w.pending>v&&(r.adler=m(r.adler,w.pending_buf,w.pending-v,v)),S===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&R(r),w.pending+2<=w.pending_buf_size&&(J(w,255&r.adler),J(w,r.adler>>8&255),r.adler=0,w.status=B)):w.status=B),w.pending!==0){if(R(r),r.avail_out===0)return w.last_flush=-1,n}else if(r.avail_in===0&&Z(D)<=Z(C)&&D!==y)return q(r,-5);if(w.status===666&&r.avail_in!==0)return q(r,-5);if(r.avail_in!==0||w.lookahead!==0||D!==_&&w.status!==666){var j=w.strategy===2?function(T,H){for(var K;;){if(T.lookahead===0&&(lt(T),T.lookahead===0)){if(H===_)return h;break}if(T.match_length=0,K=i._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++,K&&(O(T,!1),T.strm.avail_out===0))return h}return T.insert=0,H===y?(O(T,!0),T.strm.avail_out===0?$:L):T.last_lit&&(O(T,!1),T.strm.avail_out===0)?h:N}(w,D):w.strategy===3?function(T,H){for(var K,G,Q,ut,nt=T.window;;){if(T.lookahead<=W){if(lt(T),T.lookahead<=W&&H===_)return h;if(T.lookahead===0)break}if(T.match_length=0,T.lookahead>=I&&0<T.strstart&&(G=nt[Q=T.strstart-1])===nt[++Q]&&G===nt[++Q]&&G===nt[++Q]){ut=T.strstart+W;do;while(G===nt[++Q]&&G===nt[++Q]&&G===nt[++Q]&&G===nt[++Q]&&G===nt[++Q]&&G===nt[++Q]&&G===nt[++Q]&&G===nt[++Q]&&Q<ut);T.match_length=W-(ut-Q),T.match_length>T.lookahead&&(T.match_length=T.lookahead)}if(T.match_length>=I?(K=i._tr_tally(T,1,T.match_length-I),T.lookahead-=T.match_length,T.strstart+=T.match_length,T.match_length=0):(K=i._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++),K&&(O(T,!1),T.strm.avail_out===0))return h}return T.insert=0,H===y?(O(T,!0),T.strm.avail_out===0?$:L):T.last_lit&&(O(T,!1),T.strm.avail_out===0)?h:N}(w,D):s[w.level].func(w,D);if(j!==$&&j!==L||(w.status=666),j===h||j===$)return r.avail_out===0&&(w.last_flush=-1),n;if(j===N&&(D===1?i._tr_align(w):D!==5&&(i._tr_stored_block(w,0,0,!1),D===3&&(tt(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),R(r),r.avail_out===0))return w.last_flush=-1,n}return D!==y?n:w.wrap<=0?1:(w.wrap===2?(J(w,255&r.adler),J(w,r.adler>>8&255),J(w,r.adler>>16&255),J(w,r.adler>>24&255),J(w,255&r.total_in),J(w,r.total_in>>8&255),J(w,r.total_in>>16&255),J(w,r.total_in>>24&255)):(V(w,r.adler>>>16),V(w,65535&r.adler)),R(r),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?n:1)},o.deflateEnd=function(r){var D;return r&&r.state?(D=r.state.status)!==x&&D!==69&&D!==73&&D!==91&&D!==103&&D!==B&&D!==666?q(r,p):(r.state=null,D===B?q(r,-3):n):p},o.deflateSetDictionary=function(r,D){var C,w,v,S,M,j,T,H,K=D.length;if(!r||!r.state||(S=(C=r.state).wrap)===2||S===1&&C.status!==x||C.lookahead)return p;for(S===1&&(r.adler=u(r.adler,D,K,0)),C.wrap=0,K>=C.w_size&&(S===0&&(tt(C.head),C.strstart=0,C.block_start=0,C.insert=0),H=new e.Buf8(C.w_size),e.arraySet(H,D,K-C.w_size,C.w_size,0),D=H,K=C.w_size),M=r.avail_in,j=r.next_in,T=r.input,r.avail_in=K,r.next_in=0,r.input=D,lt(C);C.lookahead>=I;){for(w=C.strstart,v=C.lookahead-(I-1);C.ins_h=(C.ins_h<<C.hash_shift^C.window[w+I-1])&C.hash_mask,C.prev[w&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=w,w++,--v;);C.strstart=w,C.lookahead=I-1,lt(C)}return C.strstart+=C.lookahead,C.block_start=C.strstart,C.insert=C.lookahead,C.lookahead=0,C.match_length=C.prev_length=I-1,C.match_available=0,r.next_in=j,r.input=T,r.avail_in=M,C.wrap=S,n},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,d,o){d.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,d,o){d.exports=function(s,e){var i,u,m,c,_,y,n,p,l,g,f,b,k,A,E,F,P,U,I,W,Y,x,B,h,N;i=s.state,u=s.next_in,h=s.input,m=u+(s.avail_in-5),c=s.next_out,N=s.output,_=c-(e-s.avail_out),y=c+(s.avail_out-257),n=i.dmax,p=i.wsize,l=i.whave,g=i.wnext,f=i.window,b=i.hold,k=i.bits,A=i.lencode,E=i.distcode,F=(1<<i.lenbits)-1,P=(1<<i.distbits)-1;t:do{k<15&&(b+=h[u++]<<k,k+=8,b+=h[u++]<<k,k+=8),U=A[b&F];e:for(;;){if(b>>>=I=U>>>24,k-=I,(I=U>>>16&255)===0)N[c++]=65535&U;else{if(!(16&I)){if(!(64&I)){U=A[(65535&U)+(b&(1<<I)-1)];continue e}if(32&I){i.mode=12;break t}s.msg="invalid literal/length code",i.mode=30;break t}W=65535&U,(I&=15)&&(k<I&&(b+=h[u++]<<k,k+=8),W+=b&(1<<I)-1,b>>>=I,k-=I),k<15&&(b+=h[u++]<<k,k+=8,b+=h[u++]<<k,k+=8),U=E[b&P];r:for(;;){if(b>>>=I=U>>>24,k-=I,!(16&(I=U>>>16&255))){if(!(64&I)){U=E[(65535&U)+(b&(1<<I)-1)];continue r}s.msg="invalid distance code",i.mode=30;break t}if(Y=65535&U,k<(I&=15)&&(b+=h[u++]<<k,(k+=8)<I&&(b+=h[u++]<<k,k+=8)),n<(Y+=b&(1<<I)-1)){s.msg="invalid distance too far back",i.mode=30;break t}if(b>>>=I,k-=I,(I=c-_)<Y){if(l<(I=Y-I)&&i.sane){s.msg="invalid distance too far back",i.mode=30;break t}if(B=f,(x=0)===g){if(x+=p-I,I<W){for(W-=I;N[c++]=f[x++],--I;);x=c-Y,B=N}}else if(g<I){if(x+=p+g-I,(I-=g)<W){for(W-=I;N[c++]=f[x++],--I;);if(x=0,g<W){for(W-=I=g;N[c++]=f[x++],--I;);x=c-Y,B=N}}}else if(x+=g-I,I<W){for(W-=I;N[c++]=f[x++],--I;);x=c-Y,B=N}for(;2<W;)N[c++]=B[x++],N[c++]=B[x++],N[c++]=B[x++],W-=3;W&&(N[c++]=B[x++],1<W&&(N[c++]=B[x++]))}else{for(x=c-Y;N[c++]=N[x++],N[c++]=N[x++],N[c++]=N[x++],2<(W-=3););W&&(N[c++]=N[x++],1<W&&(N[c++]=N[x++]))}break}}break}}while(u<m&&c<y);u-=W=k>>3,b&=(1<<(k-=W<<3))-1,s.next_in=u,s.next_out=c,s.avail_in=u<m?m-u+5:5-(u-m),s.avail_out=c<y?y-c+257:257-(c-y),i.hold=b,i.bits=k}},{}],49:[function(t,d,o){var s=t("../utils/common"),e=t("./adler32"),i=t("./crc32"),u=t("./inffast"),m=t("./inftrees"),c=1,_=2,y=0,n=-2,p=1,l=852,g=592;function f(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(x){var B;return x&&x.state?(B=x.state,x.total_in=x.total_out=B.total=0,x.msg="",B.wrap&&(x.adler=1&B.wrap),B.mode=p,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new s.Buf32(l),B.distcode=B.distdyn=new s.Buf32(g),B.sane=1,B.back=-1,y):n}function A(x){var B;return x&&x.state?((B=x.state).wsize=0,B.whave=0,B.wnext=0,k(x)):n}function E(x,B){var h,N;return x&&x.state?(N=x.state,B<0?(h=0,B=-B):(h=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?n:(N.window!==null&&N.wbits!==B&&(N.window=null),N.wrap=h,N.wbits=B,A(x))):n}function F(x,B){var h,N;return x?(N=new b,(x.state=N).window=null,(h=E(x,B))!==y&&(x.state=null),h):n}var P,U,I=!0;function W(x){if(I){var B;for(P=new s.Buf32(512),U=new s.Buf32(32),B=0;B<144;)x.lens[B++]=8;for(;B<256;)x.lens[B++]=9;for(;B<280;)x.lens[B++]=7;for(;B<288;)x.lens[B++]=8;for(m(c,x.lens,0,288,P,0,x.work,{bits:9}),B=0;B<32;)x.lens[B++]=5;m(_,x.lens,0,32,U,0,x.work,{bits:5}),I=!1}x.lencode=P,x.lenbits=9,x.distcode=U,x.distbits=5}function Y(x,B,h,N){var $,L=x.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new s.Buf8(L.wsize)),N>=L.wsize?(s.arraySet(L.window,B,h-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(N<($=L.wsize-L.wnext)&&($=N),s.arraySet(L.window,B,h-N,$,L.wnext),(N-=$)?(s.arraySet(L.window,B,h-N,N,0),L.wnext=N,L.whave=L.wsize):(L.wnext+=$,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=$))),0}o.inflateReset=A,o.inflateReset2=E,o.inflateResetKeep=k,o.inflateInit=function(x){return F(x,15)},o.inflateInit2=F,o.inflate=function(x,B){var h,N,$,L,q,Z,tt,R,O,J,V,X,lt,ft,rt,st,ht,dt,yt,wt,r,D,C,w,v=0,S=new s.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return n;(h=x.state).mode===12&&(h.mode=13),q=x.next_out,$=x.output,tt=x.avail_out,L=x.next_in,N=x.input,Z=x.avail_in,R=h.hold,O=h.bits,J=Z,V=tt,D=y;t:for(;;)switch(h.mode){case p:if(h.wrap===0){h.mode=13;break}for(;O<16;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(2&h.wrap&&R===35615){S[h.check=0]=255&R,S[1]=R>>>8&255,h.check=i(h.check,S,2,0),O=R=0,h.mode=2;break}if(h.flags=0,h.head&&(h.head.done=!1),!(1&h.wrap)||(((255&R)<<8)+(R>>8))%31){x.msg="incorrect header check",h.mode=30;break}if((15&R)!=8){x.msg="unknown compression method",h.mode=30;break}if(O-=4,r=8+(15&(R>>>=4)),h.wbits===0)h.wbits=r;else if(r>h.wbits){x.msg="invalid window size",h.mode=30;break}h.dmax=1<<r,x.adler=h.check=1,h.mode=512&R?10:12,O=R=0;break;case 2:for(;O<16;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(h.flags=R,(255&h.flags)!=8){x.msg="unknown compression method",h.mode=30;break}if(57344&h.flags){x.msg="unknown header flags set",h.mode=30;break}h.head&&(h.head.text=R>>8&1),512&h.flags&&(S[0]=255&R,S[1]=R>>>8&255,h.check=i(h.check,S,2,0)),O=R=0,h.mode=3;case 3:for(;O<32;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}h.head&&(h.head.time=R),512&h.flags&&(S[0]=255&R,S[1]=R>>>8&255,S[2]=R>>>16&255,S[3]=R>>>24&255,h.check=i(h.check,S,4,0)),O=R=0,h.mode=4;case 4:for(;O<16;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}h.head&&(h.head.xflags=255&R,h.head.os=R>>8),512&h.flags&&(S[0]=255&R,S[1]=R>>>8&255,h.check=i(h.check,S,2,0)),O=R=0,h.mode=5;case 5:if(1024&h.flags){for(;O<16;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}h.length=R,h.head&&(h.head.extra_len=R),512&h.flags&&(S[0]=255&R,S[1]=R>>>8&255,h.check=i(h.check,S,2,0)),O=R=0}else h.head&&(h.head.extra=null);h.mode=6;case 6:if(1024&h.flags&&(Z<(X=h.length)&&(X=Z),X&&(h.head&&(r=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Array(h.head.extra_len)),s.arraySet(h.head.extra,N,L,X,r)),512&h.flags&&(h.check=i(h.check,N,X,L)),Z-=X,L+=X,h.length-=X),h.length))break t;h.length=0,h.mode=7;case 7:if(2048&h.flags){if(Z===0)break t;for(X=0;r=N[L+X++],h.head&&r&&h.length<65536&&(h.head.name+=String.fromCharCode(r)),r&&X<Z;);if(512&h.flags&&(h.check=i(h.check,N,X,L)),Z-=X,L+=X,r)break t}else h.head&&(h.head.name=null);h.length=0,h.mode=8;case 8:if(4096&h.flags){if(Z===0)break t;for(X=0;r=N[L+X++],h.head&&r&&h.length<65536&&(h.head.comment+=String.fromCharCode(r)),r&&X<Z;);if(512&h.flags&&(h.check=i(h.check,N,X,L)),Z-=X,L+=X,r)break t}else h.head&&(h.head.comment=null);h.mode=9;case 9:if(512&h.flags){for(;O<16;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(R!==(65535&h.check)){x.msg="header crc mismatch",h.mode=30;break}O=R=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),x.adler=h.check=0,h.mode=12;break;case 10:for(;O<32;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}x.adler=h.check=f(R),O=R=0,h.mode=11;case 11:if(h.havedict===0)return x.next_out=q,x.avail_out=tt,x.next_in=L,x.avail_in=Z,h.hold=R,h.bits=O,2;x.adler=h.check=1,h.mode=12;case 12:if(B===5||B===6)break t;case 13:if(h.last){R>>>=7&O,O-=7&O,h.mode=27;break}for(;O<3;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}switch(h.last=1&R,O-=1,3&(R>>>=1)){case 0:h.mode=14;break;case 1:if(W(h),h.mode=20,B!==6)break;R>>>=2,O-=2;break t;case 2:h.mode=17;break;case 3:x.msg="invalid block type",h.mode=30}R>>>=2,O-=2;break;case 14:for(R>>>=7&O,O-=7&O;O<32;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if((65535&R)!=(R>>>16^65535)){x.msg="invalid stored block lengths",h.mode=30;break}if(h.length=65535&R,O=R=0,h.mode=15,B===6)break t;case 15:h.mode=16;case 16:if(X=h.length){if(Z<X&&(X=Z),tt<X&&(X=tt),X===0)break t;s.arraySet($,N,L,X,q),Z-=X,L+=X,tt-=X,q+=X,h.length-=X;break}h.mode=12;break;case 17:for(;O<14;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(h.nlen=257+(31&R),R>>>=5,O-=5,h.ndist=1+(31&R),R>>>=5,O-=5,h.ncode=4+(15&R),R>>>=4,O-=4,286<h.nlen||30<h.ndist){x.msg="too many length or distance symbols",h.mode=30;break}h.have=0,h.mode=18;case 18:for(;h.have<h.ncode;){for(;O<3;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}h.lens[M[h.have++]]=7&R,R>>>=3,O-=3}for(;h.have<19;)h.lens[M[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,C={bits:h.lenbits},D=m(0,h.lens,0,19,h.lencode,0,h.work,C),h.lenbits=C.bits,D){x.msg="invalid code lengths set",h.mode=30;break}h.have=0,h.mode=19;case 19:for(;h.have<h.nlen+h.ndist;){for(;st=(v=h.lencode[R&(1<<h.lenbits)-1])>>>16&255,ht=65535&v,!((rt=v>>>24)<=O);){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(ht<16)R>>>=rt,O-=rt,h.lens[h.have++]=ht;else{if(ht===16){for(w=rt+2;O<w;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(R>>>=rt,O-=rt,h.have===0){x.msg="invalid bit length repeat",h.mode=30;break}r=h.lens[h.have-1],X=3+(3&R),R>>>=2,O-=2}else if(ht===17){for(w=rt+3;O<w;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}O-=rt,r=0,X=3+(7&(R>>>=rt)),R>>>=3,O-=3}else{for(w=rt+7;O<w;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}O-=rt,r=0,X=11+(127&(R>>>=rt)),R>>>=7,O-=7}if(h.have+X>h.nlen+h.ndist){x.msg="invalid bit length repeat",h.mode=30;break}for(;X--;)h.lens[h.have++]=r}}if(h.mode===30)break;if(h.lens[256]===0){x.msg="invalid code -- missing end-of-block",h.mode=30;break}if(h.lenbits=9,C={bits:h.lenbits},D=m(c,h.lens,0,h.nlen,h.lencode,0,h.work,C),h.lenbits=C.bits,D){x.msg="invalid literal/lengths set",h.mode=30;break}if(h.distbits=6,h.distcode=h.distdyn,C={bits:h.distbits},D=m(_,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,C),h.distbits=C.bits,D){x.msg="invalid distances set",h.mode=30;break}if(h.mode=20,B===6)break t;case 20:h.mode=21;case 21:if(6<=Z&&258<=tt){x.next_out=q,x.avail_out=tt,x.next_in=L,x.avail_in=Z,h.hold=R,h.bits=O,u(x,V),q=x.next_out,$=x.output,tt=x.avail_out,L=x.next_in,N=x.input,Z=x.avail_in,R=h.hold,O=h.bits,h.mode===12&&(h.back=-1);break}for(h.back=0;st=(v=h.lencode[R&(1<<h.lenbits)-1])>>>16&255,ht=65535&v,!((rt=v>>>24)<=O);){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(st&&!(240&st)){for(dt=rt,yt=st,wt=ht;st=(v=h.lencode[wt+((R&(1<<dt+yt)-1)>>dt)])>>>16&255,ht=65535&v,!(dt+(rt=v>>>24)<=O);){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}R>>>=dt,O-=dt,h.back+=dt}if(R>>>=rt,O-=rt,h.back+=rt,h.length=ht,st===0){h.mode=26;break}if(32&st){h.back=-1,h.mode=12;break}if(64&st){x.msg="invalid literal/length code",h.mode=30;break}h.extra=15&st,h.mode=22;case 22:if(h.extra){for(w=h.extra;O<w;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}h.length+=R&(1<<h.extra)-1,R>>>=h.extra,O-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=23;case 23:for(;st=(v=h.distcode[R&(1<<h.distbits)-1])>>>16&255,ht=65535&v,!((rt=v>>>24)<=O);){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(!(240&st)){for(dt=rt,yt=st,wt=ht;st=(v=h.distcode[wt+((R&(1<<dt+yt)-1)>>dt)])>>>16&255,ht=65535&v,!(dt+(rt=v>>>24)<=O);){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}R>>>=dt,O-=dt,h.back+=dt}if(R>>>=rt,O-=rt,h.back+=rt,64&st){x.msg="invalid distance code",h.mode=30;break}h.offset=ht,h.extra=15&st,h.mode=24;case 24:if(h.extra){for(w=h.extra;O<w;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}h.offset+=R&(1<<h.extra)-1,R>>>=h.extra,O-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){x.msg="invalid distance too far back",h.mode=30;break}h.mode=25;case 25:if(tt===0)break t;if(X=V-tt,h.offset>X){if((X=h.offset-X)>h.whave&&h.sane){x.msg="invalid distance too far back",h.mode=30;break}lt=X>h.wnext?(X-=h.wnext,h.wsize-X):h.wnext-X,X>h.length&&(X=h.length),ft=h.window}else ft=$,lt=q-h.offset,X=h.length;for(tt<X&&(X=tt),tt-=X,h.length-=X;$[q++]=ft[lt++],--X;);h.length===0&&(h.mode=21);break;case 26:if(tt===0)break t;$[q++]=h.length,tt--,h.mode=21;break;case 27:if(h.wrap){for(;O<32;){if(Z===0)break t;Z--,R|=N[L++]<<O,O+=8}if(V-=tt,x.total_out+=V,h.total+=V,V&&(x.adler=h.check=h.flags?i(h.check,$,V,q-V):e(h.check,$,V,q-V)),V=tt,(h.flags?R:f(R))!==h.check){x.msg="incorrect data check",h.mode=30;break}O=R=0}h.mode=28;case 28:if(h.wrap&&h.flags){for(;O<32;){if(Z===0)break t;Z--,R+=N[L++]<<O,O+=8}if(R!==(4294967295&h.total)){x.msg="incorrect length check",h.mode=30;break}O=R=0}h.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;case 32:default:return n}return x.next_out=q,x.avail_out=tt,x.next_in=L,x.avail_in=Z,h.hold=R,h.bits=O,(h.wsize||V!==x.avail_out&&h.mode<30&&(h.mode<27||B!==4))&&Y(x,x.output,x.next_out,V-x.avail_out)?(h.mode=31,-4):(J-=x.avail_in,V-=x.avail_out,x.total_in+=J,x.total_out+=V,h.total+=V,h.wrap&&V&&(x.adler=h.check=h.flags?i(h.check,$,V,x.next_out-V):e(h.check,$,V,x.next_out-V)),x.data_type=h.bits+(h.last?64:0)+(h.mode===12?128:0)+(h.mode===20||h.mode===15?256:0),(J==0&&V===0||B===4)&&D===y&&(D=-5),D)},o.inflateEnd=function(x){if(!x||!x.state)return n;var B=x.state;return B.window&&(B.window=null),x.state=null,y},o.inflateGetHeader=function(x,B){var h;return x&&x.state&&2&(h=x.state).wrap?((h.head=B).done=!1,y):n},o.inflateSetDictionary=function(x,B){var h,N=B.length;return x&&x.state?(h=x.state).wrap!==0&&h.mode!==11?n:h.mode===11&&e(1,B,N,0)!==h.check?-3:Y(x,B,N,N)?(h.mode=31,-4):(h.havedict=1,y):n},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,d,o){var s=t("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(c,_,y,n,p,l,g,f){var b,k,A,E,F,P,U,I,W,Y=f.bits,x=0,B=0,h=0,N=0,$=0,L=0,q=0,Z=0,tt=0,R=0,O=null,J=0,V=new s.Buf16(16),X=new s.Buf16(16),lt=null,ft=0;for(x=0;x<=15;x++)V[x]=0;for(B=0;B<n;B++)V[_[y+B]]++;for($=Y,N=15;1<=N&&V[N]===0;N--);if(N<$&&($=N),N===0)return p[l++]=20971520,p[l++]=20971520,f.bits=1,0;for(h=1;h<N&&V[h]===0;h++);for($<h&&($=h),x=Z=1;x<=15;x++)if(Z<<=1,(Z-=V[x])<0)return-1;if(0<Z&&(c===0||N!==1))return-1;for(X[1]=0,x=1;x<15;x++)X[x+1]=X[x]+V[x];for(B=0;B<n;B++)_[y+B]!==0&&(g[X[_[y+B]]++]=B);if(P=c===0?(O=lt=g,19):c===1?(O=e,J-=257,lt=i,ft-=257,256):(O=u,lt=m,-1),x=h,F=l,q=B=R=0,A=-1,E=(tt=1<<(L=$))-1,c===1&&852<tt||c===2&&592<tt)return 1;for(;;){for(U=x-q,W=g[B]<P?(I=0,g[B]):g[B]>P?(I=lt[ft+g[B]],O[J+g[B]]):(I=96,0),b=1<<x-q,h=k=1<<L;p[F+(R>>q)+(k-=b)]=U<<24|I<<16|W|0,k!==0;);for(b=1<<x-1;R&b;)b>>=1;if(b!==0?(R&=b-1,R+=b):R=0,B++,--V[x]==0){if(x===N)break;x=_[y+g[B]]}if($<x&&(R&E)!==A){for(q===0&&(q=$),F+=h,Z=1<<(L=x-q);L+q<N&&!((Z-=V[L+q])<=0);)L++,Z<<=1;if(tt+=1<<L,c===1&&852<tt||c===2&&592<tt)return 1;p[A=R&E]=$<<24|L<<16|F-l|0}}return R!==0&&(p[F+R]=x-q<<24|64<<16|0),f.bits=$,0}},{"../utils/common":41}],51:[function(t,d,o){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,d,o){var s=t("../utils/common"),e=0,i=1;function u(v){for(var S=v.length;0<=--S;)v[S]=0}var m=0,c=29,_=256,y=_+1+c,n=30,p=19,l=2*y+1,g=15,f=16,b=7,k=256,A=16,E=17,F=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(y+2));u(Y);var x=new Array(2*n);u(x);var B=new Array(512);u(B);var h=new Array(256);u(h);var N=new Array(c);u(N);var $,L,q,Z=new Array(n);function tt(v,S,M,j,T){this.static_tree=v,this.extra_bits=S,this.extra_base=M,this.elems=j,this.max_length=T,this.has_stree=v&&v.length}function R(v,S){this.dyn_tree=v,this.max_code=0,this.stat_desc=S}function O(v){return v<256?B[v]:B[256+(v>>>7)]}function J(v,S){v.pending_buf[v.pending++]=255&S,v.pending_buf[v.pending++]=S>>>8&255}function V(v,S,M){v.bi_valid>f-M?(v.bi_buf|=S<<v.bi_valid&65535,J(v,v.bi_buf),v.bi_buf=S>>f-v.bi_valid,v.bi_valid+=M-f):(v.bi_buf|=S<<v.bi_valid&65535,v.bi_valid+=M)}function X(v,S,M){V(v,M[2*S],M[2*S+1])}function lt(v,S){for(var M=0;M|=1&v,v>>>=1,M<<=1,0<--S;);return M>>>1}function ft(v,S,M){var j,T,H=new Array(g+1),K=0;for(j=1;j<=g;j++)H[j]=K=K+M[j-1]<<1;for(T=0;T<=S;T++){var G=v[2*T+1];G!==0&&(v[2*T]=lt(H[G]++,G))}}function rt(v){var S;for(S=0;S<y;S++)v.dyn_ltree[2*S]=0;for(S=0;S<n;S++)v.dyn_dtree[2*S]=0;for(S=0;S<p;S++)v.bl_tree[2*S]=0;v.dyn_ltree[2*k]=1,v.opt_len=v.static_len=0,v.last_lit=v.matches=0}function st(v){8<v.bi_valid?J(v,v.bi_buf):0<v.bi_valid&&(v.pending_buf[v.pending++]=v.bi_buf),v.bi_buf=0,v.bi_valid=0}function ht(v,S,M,j){var T=2*S,H=2*M;return v[T]<v[H]||v[T]===v[H]&&j[S]<=j[M]}function dt(v,S,M){for(var j=v.heap[M],T=M<<1;T<=v.heap_len&&(T<v.heap_len&&ht(S,v.heap[T+1],v.heap[T],v.depth)&&T++,!ht(S,j,v.heap[T],v.depth));)v.heap[M]=v.heap[T],M=T,T<<=1;v.heap[M]=j}function yt(v,S,M){var j,T,H,K,G=0;if(v.last_lit!==0)for(;j=v.pending_buf[v.d_buf+2*G]<<8|v.pending_buf[v.d_buf+2*G+1],T=v.pending_buf[v.l_buf+G],G++,j===0?X(v,T,S):(X(v,(H=h[T])+_+1,S),(K=P[H])!==0&&V(v,T-=N[H],K),X(v,H=O(--j),M),(K=U[H])!==0&&V(v,j-=Z[H],K)),G<v.last_lit;);X(v,k,S)}function wt(v,S){var M,j,T,H=S.dyn_tree,K=S.stat_desc.static_tree,G=S.stat_desc.has_stree,Q=S.stat_desc.elems,ut=-1;for(v.heap_len=0,v.heap_max=l,M=0;M<Q;M++)H[2*M]!==0?(v.heap[++v.heap_len]=ut=M,v.depth[M]=0):H[2*M+1]=0;for(;v.heap_len<2;)H[2*(T=v.heap[++v.heap_len]=ut<2?++ut:0)]=1,v.depth[T]=0,v.opt_len--,G&&(v.static_len-=K[2*T+1]);for(S.max_code=ut,M=v.heap_len>>1;1<=M;M--)dt(v,H,M);for(T=Q;M=v.heap[1],v.heap[1]=v.heap[v.heap_len--],dt(v,H,1),j=v.heap[1],v.heap[--v.heap_max]=M,v.heap[--v.heap_max]=j,H[2*T]=H[2*M]+H[2*j],v.depth[T]=(v.depth[M]>=v.depth[j]?v.depth[M]:v.depth[j])+1,H[2*M+1]=H[2*j+1]=T,v.heap[1]=T++,dt(v,H,1),2<=v.heap_len;);v.heap[--v.heap_max]=v.heap[1],function(nt,kt){var Dt,Ct,Bt,mt,Nt,Vt,At=kt.dyn_tree,ee=kt.max_code,ze=kt.stat_desc.static_tree,Te=kt.stat_desc.has_stree,Oe=kt.stat_desc.extra_bits,re=kt.stat_desc.extra_base,Pt=kt.stat_desc.max_length,Ft=0;for(mt=0;mt<=g;mt++)nt.bl_count[mt]=0;for(At[2*nt.heap[nt.heap_max]+1]=0,Dt=nt.heap_max+1;Dt<l;Dt++)Pt<(mt=At[2*At[2*(Ct=nt.heap[Dt])+1]+1]+1)&&(mt=Pt,Ft++),At[2*Ct+1]=mt,ee<Ct||(nt.bl_count[mt]++,Nt=0,re<=Ct&&(Nt=Oe[Ct-re]),Vt=At[2*Ct],nt.opt_len+=Vt*(mt+Nt),Te&&(nt.static_len+=Vt*(ze[2*Ct+1]+Nt)));if(Ft!==0){do{for(mt=Pt-1;nt.bl_count[mt]===0;)mt--;nt.bl_count[mt]--,nt.bl_count[mt+1]+=2,nt.bl_count[Pt]--,Ft-=2}while(0<Ft);for(mt=Pt;mt!==0;mt--)for(Ct=nt.bl_count[mt];Ct!==0;)ee<(Bt=nt.heap[--Dt])||(At[2*Bt+1]!==mt&&(nt.opt_len+=(mt-At[2*Bt+1])*At[2*Bt],At[2*Bt+1]=mt),Ct--)}}(v,S),ft(H,ut,v.bl_count)}function r(v,S,M){var j,T,H=-1,K=S[1],G=0,Q=7,ut=4;for(K===0&&(Q=138,ut=3),S[2*(M+1)+1]=65535,j=0;j<=M;j++)T=K,K=S[2*(j+1)+1],++G<Q&&T===K||(G<ut?v.bl_tree[2*T]+=G:T!==0?(T!==H&&v.bl_tree[2*T]++,v.bl_tree[2*A]++):G<=10?v.bl_tree[2*E]++:v.bl_tree[2*F]++,H=T,ut=(G=0)===K?(Q=138,3):T===K?(Q=6,3):(Q=7,4))}function D(v,S,M){var j,T,H=-1,K=S[1],G=0,Q=7,ut=4;for(K===0&&(Q=138,ut=3),j=0;j<=M;j++)if(T=K,K=S[2*(j+1)+1],!(++G<Q&&T===K)){if(G<ut)for(;X(v,T,v.bl_tree),--G!=0;);else T!==0?(T!==H&&(X(v,T,v.bl_tree),G--),X(v,A,v.bl_tree),V(v,G-3,2)):G<=10?(X(v,E,v.bl_tree),V(v,G-3,3)):(X(v,F,v.bl_tree),V(v,G-11,7));H=T,ut=(G=0)===K?(Q=138,3):T===K?(Q=6,3):(Q=7,4)}}u(Z);var C=!1;function w(v,S,M,j){V(v,(m<<1)+(j?1:0),3),function(T,H,K,G){st(T),G&&(J(T,K),J(T,~K)),s.arraySet(T.pending_buf,T.window,H,K,T.pending),T.pending+=K}(v,S,M,!0)}o._tr_init=function(v){C||(function(){var S,M,j,T,H,K=new Array(g+1);for(T=j=0;T<c-1;T++)for(N[T]=j,S=0;S<1<<P[T];S++)h[j++]=T;for(h[j-1]=T,T=H=0;T<16;T++)for(Z[T]=H,S=0;S<1<<U[T];S++)B[H++]=T;for(H>>=7;T<n;T++)for(Z[T]=H<<7,S=0;S<1<<U[T]-7;S++)B[256+H++]=T;for(M=0;M<=g;M++)K[M]=0;for(S=0;S<=143;)Y[2*S+1]=8,S++,K[8]++;for(;S<=255;)Y[2*S+1]=9,S++,K[9]++;for(;S<=279;)Y[2*S+1]=7,S++,K[7]++;for(;S<=287;)Y[2*S+1]=8,S++,K[8]++;for(ft(Y,y+1,K),S=0;S<n;S++)x[2*S+1]=5,x[2*S]=lt(S,5);$=new tt(Y,P,_+1,y,g),L=new tt(x,U,0,n,g),q=new tt(new Array(0),I,0,p,b)}(),C=!0),v.l_desc=new R(v.dyn_ltree,$),v.d_desc=new R(v.dyn_dtree,L),v.bl_desc=new R(v.bl_tree,q),v.bi_buf=0,v.bi_valid=0,rt(v)},o._tr_stored_block=w,o._tr_flush_block=function(v,S,M,j){var T,H,K=0;0<v.level?(v.strm.data_type===2&&(v.strm.data_type=function(G){var Q,ut=4093624447;for(Q=0;Q<=31;Q++,ut>>>=1)if(1&ut&&G.dyn_ltree[2*Q]!==0)return e;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return i;for(Q=32;Q<_;Q++)if(G.dyn_ltree[2*Q]!==0)return i;return e}(v)),wt(v,v.l_desc),wt(v,v.d_desc),K=function(G){var Q;for(r(G,G.dyn_ltree,G.l_desc.max_code),r(G,G.dyn_dtree,G.d_desc.max_code),wt(G,G.bl_desc),Q=p-1;3<=Q&&G.bl_tree[2*W[Q]+1]===0;Q--);return G.opt_len+=3*(Q+1)+5+5+4,Q}(v),T=v.opt_len+3+7>>>3,(H=v.static_len+3+7>>>3)<=T&&(T=H)):T=H=M+5,M+4<=T&&S!==-1?w(v,S,M,j):v.strategy===4||H===T?(V(v,2+(j?1:0),3),yt(v,Y,x)):(V(v,4+(j?1:0),3),function(G,Q,ut,nt){var kt;for(V(G,Q-257,5),V(G,ut-1,5),V(G,nt-4,4),kt=0;kt<nt;kt++)V(G,G.bl_tree[2*W[kt]+1],3);D(G,G.dyn_ltree,Q-1),D(G,G.dyn_dtree,ut-1)}(v,v.l_desc.max_code+1,v.d_desc.max_code+1,K+1),yt(v,v.dyn_ltree,v.dyn_dtree)),rt(v),j&&st(v)},o._tr_tally=function(v,S,M){return v.pending_buf[v.d_buf+2*v.last_lit]=S>>>8&255,v.pending_buf[v.d_buf+2*v.last_lit+1]=255&S,v.pending_buf[v.l_buf+v.last_lit]=255&M,v.last_lit++,S===0?v.dyn_ltree[2*M]++:(v.matches++,S--,v.dyn_ltree[2*(h[M]+_+1)]++,v.dyn_dtree[2*O(S)]++),v.last_lit===v.lit_bufsize-1},o._tr_align=function(v){V(v,2,3),X(v,k,Y),function(S){S.bi_valid===16?(J(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}(v)}},{"../utils/common":41}],53:[function(t,d,o){d.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,d,o){(function(s){(function(e,i){if(!e.setImmediate){var u,m,c,_,y=1,n={},p=!1,l=e.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(e);g=g&&g.setTimeout?g:e,u={}.toString.call(e.process)==="[object process]"?function(A){process.nextTick(function(){b(A)})}:function(){if(e.postMessage&&!e.importScripts){var A=!0,E=e.onmessage;return e.onmessage=function(){A=!1},e.postMessage("","*"),e.onmessage=E,A}}()?(_="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",k,!1):e.attachEvent("onmessage",k),function(A){e.postMessage(_+A,"*")}):e.MessageChannel?((c=new MessageChannel).port1.onmessage=function(A){b(A.data)},function(A){c.port2.postMessage(A)}):l&&"onreadystatechange"in l.createElement("script")?(m=l.documentElement,function(A){var E=l.createElement("script");E.onreadystatechange=function(){b(A),E.onreadystatechange=null,m.removeChild(E),E=null},m.appendChild(E)}):function(A){setTimeout(b,0,A)},g.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var E=new Array(arguments.length-1),F=0;F<E.length;F++)E[F]=arguments[F+1];var P={callback:A,args:E};return n[y]=P,u(y),y++},g.clearImmediate=f}function f(A){delete n[A]}function b(A){if(p)setTimeout(b,0,A);else{var E=n[A];if(E){p=!0;try{(function(F){var P=F.callback,U=F.args;switch(U.length){case 0:P();break;case 1:P(U[0]);break;case 2:P(U[0],U[1]);break;case 3:P(U[0],U[1],U[2]);break;default:P.apply(i,U)}})(E)}finally{f(A),p=!1}}}}function k(A){A.source===e&&typeof A.data=="string"&&A.data.indexOf(_)===0&&b(+A.data.slice(_.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(xe);var Ge=xe.exports;const Ce=te(Ge);var Gt={};Gt._getBinaryFromXHR=function(z){return z.response||z.responseText};function fe(){try{return new window.XMLHttpRequest}catch{}}function Xe(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch{}}var Ve=typeof window<"u"&&window.ActiveXObject?function(){return fe()||Xe()}:fe;Gt.getBinaryContent=function(z,a){var t,d,o,s;a||(a={}),typeof a=="function"?(s=a,a={}):typeof a.callback=="function"&&(s=a.callback),!s&&typeof Promise<"u"?t=new Promise(function(i,u){d=i,o=u}):(d=function(i){s(null,i)},o=function(i){s(i,null)});try{var e=Ve();e.open("GET",z,!0),"responseType"in e&&(e.responseType="arraybuffer"),e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.onreadystatechange=function(i){if(e.readyState===4)if(e.status===200||e.status===0)try{d(Gt._getBinaryFromXHR(e))}catch(u){o(new Error(u))}else o(new Error("Ajax error for "+z+" : "+this.status+" "+this.statusText))},a.progress&&(e.onprogress=function(i){a.progress({path:z,originalEvent:i,percent:i.loaded/i.total*100,loaded:i.loaded,total:i.total})}),e.send()}catch(i){o(new Error(i),null)}return t};var Ke=Gt;const qe=te(Ke);var Se={exports:{}};(function(z,a){(function(t,d){d()})(zt,function(){function t(m,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function d(m,c,_){var y=new XMLHttpRequest;y.open("GET",m),y.responseType="blob",y.onload=function(){u(y.response,c,_)},y.onerror=function(){console.error("could not download file")},y.send()}function o(m){var c=new XMLHttpRequest;c.open("HEAD",m,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function s(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(c)}}var e=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof zt=="object"&&zt.global===zt?zt:void 0,i=e.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=e.saveAs||(typeof window!="object"||window!==e?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(m,c,_){var y=e.URL||e.webkitURL,n=document.createElement("a");c=c||m.name||"download",n.download=c,n.rel="noopener",typeof m=="string"?(n.href=m,n.origin===location.origin?s(n):o(n.href)?d(m,c,_):s(n,n.target="_blank")):(n.href=y.createObjectURL(m),setTimeout(function(){y.revokeObjectURL(n.href)},4e4),setTimeout(function(){s(n)},0))}:"msSaveOrOpenBlob"in navigator?function(m,c,_){if(c=c||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(t(m,_),c);else if(o(m))d(m,c,_);else{var y=document.createElement("a");y.href=m,y.target="_blank",setTimeout(function(){s(y)})}}:function(m,c,_,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof m=="string")return d(m,c,_);var n=m.type==="application/octet-stream",p=/constructor/i.test(e.HTMLElement)||e.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||n&&p||i)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var k=g.result;k=l?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=k:location=k,y=null},g.readAsDataURL(m)}else{var f=e.URL||e.webkitURL,b=f.createObjectURL(m);y?y.location=b:location.href=b,y=null,setTimeout(function(){f.revokeObjectURL(b)},4e4)}});e.saveAs=u.saveAs=u,z.exports=u})})(Se);var Ye=Se.exports;const Je=te(Ye);async function Qe(z,a){if(!z||!a)return;let t=structuredClone(z);for(let e=0;e<t.sections.length;e++)for(let i in t.sections[e].notes)t.sections[e].notes[i]=Array.from(t.sections[e].notes[i]);let d=new Ce;d.file("data.json",JSON.stringify(t));let o=await Ee(a);d.file("music.mp3",o);let s=await d.generateAsync({type:"blob"});Je.saveAs(s,z.name+".booty")}async function $e(z){var i,u;if(!z.name.endsWith(".booty"))throw alert("This ain't no booty file!"),"This ain't no booty file!";let a=Ee(URL.createObjectURL(z)),t=await Ce.loadAsync(a),d=await((i=t.file("data.json"))==null?void 0:i.async("string")),o=await((u=t.file("music.mp3"))==null?void 0:u.async("blob"));if(!d||!o)throw"Couldn't read elements of booty file.";let s=JSON.parse(d);for(let m of s.sections)for(let c in m.notes)m.notes[c]=new Set(m.notes[c]);let e=URL.createObjectURL(o);return{data:s,music:e}}async function Ee(z){return new Promise((a,t)=>{qe.getBinaryContent(z,(d,o)=>{if(d){t(d);return}a(o)})})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function vt(z,a,t,d){return new(t||(t=Promise))(function(o,s){function e(m){try{u(d.next(m))}catch(c){s(c)}}function i(m){try{u(d.throw(m))}catch(c){s(c)}}function u(m){var c;m.done?o(m.value):(c=m.value,c instanceof t?c:new t(function(_){_(c)})).then(e,i)}u((d=d.apply(z,a||[])).next())})}class Lt{constructor(){this.listeners={}}on(a,t,d){if(this.listeners[a]||(this.listeners[a]=new Set),this.listeners[a].add(t),d==null?void 0:d.once){const o=()=>{this.un(a,o),this.un(a,t)};return this.on(a,o),o}return()=>this.un(a,t)}un(a,t){var d;(d=this.listeners[a])===null||d===void 0||d.delete(t)}once(a,t){return this.on(a,t,{once:!0})}unAll(){this.listeners={}}emit(a,...t){this.listeners[a]&&this.listeners[a].forEach(d=>d(...t))}}const pe={decode:function(z,a){return vt(this,void 0,void 0,function*(){const t=new AudioContext({sampleRate:a});return t.decodeAudioData(z).finally(()=>t.close())})},createBuffer:function(z,a){return typeof z[0]=="number"&&(z=[z]),function(t){const d=t[0];if(d.some(o=>o>1||o<-1)){const o=d.length;let s=0;for(let e=0;e<o;e++){const i=Math.abs(d[e]);i>s&&(s=i)}for(const e of t)for(let i=0;i<o;i++)e[i]/=s}}(z),{duration:a,length:z[0].length,sampleRate:z[0].length/a,numberOfChannels:z.length,getChannelData:t=>z==null?void 0:z[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Ae(z,a){const t=a.xmlns?document.createElementNS(a.xmlns,z):document.createElement(z);for(const[d,o]of Object.entries(a))if(d==="children")for(const[s,e]of Object.entries(a))typeof e=="string"?t.appendChild(document.createTextNode(e)):t.appendChild(Ae(s,e));else d==="style"?Object.assign(t.style,o):d==="textContent"?t.textContent=o:t.setAttribute(d,o.toString());return t}function me(z,a,t){const d=Ae(z,a||{});return t==null||t.appendChild(d),d}var tr=Object.freeze({__proto__:null,createElement:me,default:me});const er={fetchBlob:function(z,a,t){return vt(this,void 0,void 0,function*(){const d=yield fetch(z,t);if(d.status>=400)throw new Error(`Failed to fetch ${z}: ${d.status} (${d.statusText})`);return function(o,s){vt(this,void 0,void 0,function*(){if(!o.body||!o.headers)return;const e=o.body.getReader(),i=Number(o.headers.get("Content-Length"))||0;let u=0;const m=_=>vt(this,void 0,void 0,function*(){u+=(_==null?void 0:_.length)||0;const y=Math.round(u/i*100);s(y)}),c=()=>vt(this,void 0,void 0,function*(){let _;try{_=yield e.read()}catch{return}_.done||(m(_.value),yield c())});c()})}(d.clone(),a),d.blob()})}};class rr extends Lt{constructor(a){super(),this.isExternalMedia=!1,a.media?(this.media=a.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),a.mediaControls&&(this.media.controls=!0),a.autoplay&&(this.media.autoplay=!0),a.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{a.playbackRate!=null&&(this.media.playbackRate=a.playbackRate)})}onMediaEvent(a,t,d){return this.media.addEventListener(a,t,d),()=>this.media.removeEventListener(a,t)}onceMediaEvent(a,t){return this.onMediaEvent(a,t,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const a=this.getSrc();a.startsWith("blob:")&&URL.revokeObjectURL(a)}canPlayType(a){return this.media.canPlayType(a)!==""}setSrc(a,t){if(this.getSrc()===a)return;this.revokeSrc();const d=t instanceof Blob&&this.canPlayType(t.type)?URL.createObjectURL(t):a;this.media.src=d}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(a){this.media=a}play(){return vt(this,void 0,void 0,function*(){if(this.media.src)return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(a){this.media.currentTime=a}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(a){this.media.volume=a}getMuted(){return this.media.muted}setMuted(a){this.media.muted=a}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(a,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=a}getMediaElement(){return this.media}setSinkId(a){return this.media.setSinkId(a)}}class Xt extends Lt{constructor(a,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.options=a;const d=this.parentFromOptionsContainer(a.container);this.parent=d;const[o,s]=this.initHtml();d.appendChild(o),this.container=o,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),t&&s.appendChild(t),this.initEvents()}parentFromOptionsContainer(a){let t;if(typeof a=="string"?t=document.querySelector(a):a instanceof HTMLElement&&(t=a),!t)throw new Error("Container not found");return t}initEvents(){const a=d=>{const o=this.wrapper.getBoundingClientRect(),s=d.clientX-o.left,e=d.clientX-o.left;return[s/o.width,e/o.height]};this.wrapper.addEventListener("click",d=>{const[o,s]=a(d);this.emit("click",o,s)}),this.wrapper.addEventListener("dblclick",d=>{const[o,s]=a(d);this.emit("dblclick",o,s)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:d,scrollWidth:o,clientWidth:s}=this.scrollContainer,e=d/o,i=(d+s)/o;this.emit("scroll",e,i)});const t=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{t().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}onContainerResize(){const a=this.parent.clientWidth;a===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=a,this.reRender())}initDrag(){(function(a,t,d,o,s=3,e=0){if(!a)return()=>{};let i=()=>{};const u=m=>{if(m.button!==e)return;m.preventDefault(),m.stopPropagation();let c=m.clientX,_=m.clientY,y=!1;const n=b=>{b.preventDefault(),b.stopPropagation();const k=b.clientX,A=b.clientY,E=k-c,F=A-_;if(y||Math.abs(E)>s||Math.abs(F)>s){const P=a.getBoundingClientRect(),{left:U,top:I}=P;y||(d==null||d(c-U,_-I),y=!0),t(E,F,k-U,A-I),c=k,_=A}},p=()=>{y&&(o==null||o()),i()},l=b=>{b.relatedTarget&&b.relatedTarget!==document.documentElement||p()},g=b=>{y&&(b.stopPropagation(),b.preventDefault())},f=b=>{y&&b.preventDefault()};document.addEventListener("pointermove",n),document.addEventListener("pointerup",p),document.addEventListener("pointerout",l),document.addEventListener("pointercancel",l),document.addEventListener("touchmove",f,{passive:!1}),document.addEventListener("click",g,{capture:!0}),i=()=>{document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",p),document.removeEventListener("pointerout",l),document.removeEventListener("pointercancel",l),document.removeEventListener("touchmove",f),setTimeout(()=>{document.removeEventListener("click",g,{capture:!0})},10)}};a.addEventListener("pointerdown",u)})(this.wrapper,(a,t,d)=>{this.emit("drag",Math.max(0,Math.min(1,d/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(a){return a==null?128:isNaN(Number(a))?a==="auto"&&this.parent.clientHeight||128:Number(a)}initHtml(){const a=document.createElement("div"),t=a.attachShadow({mode:"open"});return t.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[a,t]}setOptions(a){if(this.options.container!==a.container){const t=this.parentFromOptionsContainer(a.container);t.appendChild(this.container),this.parent=t}a.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=a,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var a;this.container.remove(),(a=this.resizeObserver)===null||a===void 0||a.disconnect()}createDelay(a=10){let t,d;const o=()=>{t&&clearTimeout(t),d&&d()};return this.timeouts.push(o),()=>new Promise((s,e)=>{o(),d=e,t=setTimeout(()=>{t=void 0,d=void 0,s()},a)})}convertColorValues(a){if(!Array.isArray(a))return a||"";if(a.length<2)return a[0]||"";const t=document.createElement("canvas"),d=t.getContext("2d"),o=t.height*(window.devicePixelRatio||1),s=d.createLinearGradient(0,0,0,o),e=1/(a.length-1);return a.forEach((i,u)=>{const m=u*e;s.addColorStop(m,i)}),s}renderBarWaveform(a,t,d,o){const s=a[0],e=a[1]||a[0],i=s.length,{width:u,height:m}=d.canvas,c=m/2,_=window.devicePixelRatio||1,y=t.barWidth?t.barWidth*_:1,n=t.barGap?t.barGap*_:t.barWidth?y/2:0,p=t.barRadius||0,l=u/(y+n)/i,g=p&&"roundRect"in d?"roundRect":"rect";d.beginPath();let f=0,b=0,k=0;for(let A=0;A<=i;A++){const E=Math.round(A*l);if(E>f){const U=Math.round(b*c*o),I=U+Math.round(k*c*o)||1;let W=c-U;t.barAlign==="top"?W=0:t.barAlign==="bottom"&&(W=m-I),d[g](f*(y+n),W,y,I,p),f=E,b=0,k=0}const F=Math.abs(s[A]||0),P=Math.abs(e[A]||0);F>b&&(b=F),P>k&&(k=P)}d.fill(),d.closePath()}renderLineWaveform(a,t,d,o){const s=e=>{const i=a[e]||a[0],u=i.length,{height:m}=d.canvas,c=m/2,_=d.canvas.width/u;d.moveTo(0,c);let y=0,n=0;for(let p=0;p<=u;p++){const l=Math.round(p*_);if(l>y){const f=c+(Math.round(n*c*o)||1)*(e===0?-1:1);d.lineTo(y,f),y=l,n=0}const g=Math.abs(i[p]||0);g>n&&(n=g)}d.lineTo(y,c)};d.beginPath(),s(0),s(1),d.fill(),d.closePath()}renderWaveform(a,t,d){if(d.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction)return void t.renderFunction(a,d);let o=t.barHeight||1;if(t.normalize){const s=Array.from(a[0]).reduce((e,i)=>Math.max(e,Math.abs(i)),0);o=s?1/s:1}t.barWidth||t.barGap||t.barAlign?this.renderBarWaveform(a,t,d,o):this.renderLineWaveform(a,t,d,o)}renderSingleCanvas(a,t,d,o,s,e,i,u){const m=window.devicePixelRatio||1,c=document.createElement("canvas"),_=a[0].length;c.width=Math.round(d*(e-s)/_),c.height=o*m,c.style.width=`${Math.floor(c.width/m)}px`,c.style.height=`${o}px`,c.style.left=`${Math.floor(s*d/m/_)}px`,i.appendChild(c);const y=c.getContext("2d");if(this.renderWaveform(a.map(n=>n.slice(s,e)),t,y),c.width>0&&c.height>0){const n=c.cloneNode(),p=n.getContext("2d");p.drawImage(c,0,0),p.globalCompositeOperation="source-in",p.fillStyle=this.convertColorValues(t.progressColor),p.fillRect(0,0,c.width,c.height),u.appendChild(n)}}renderChannel(a,t,d){return vt(this,void 0,void 0,function*(){const o=document.createElement("div"),s=this.getHeight(t.height);o.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(o);const e=o.cloneNode();this.progressWrapper.appendChild(e);const i=a[0].length,u=(f,b)=>{this.renderSingleCanvas(a,t,d,s,Math.max(0,f),Math.min(b,i),o,e)};if(!this.isScrollable)return void u(0,i);const{scrollLeft:m,scrollWidth:c,clientWidth:_}=this.scrollContainer,y=i/c;let n=Math.min(Xt.MAX_CANVAS_WIDTH,_);if(t.barWidth||t.barGap){const f=t.barWidth||.5,b=f+(t.barGap||f/2);n%b!=0&&(n=Math.floor(n/b)*b)}const p=Math.floor(Math.abs(m)*y),l=Math.floor(p+n*y),g=l-p;g<=0||(u(p,l),yield Promise.all([vt(this,void 0,void 0,function*(){if(p===0)return;const f=this.createDelay();for(let b=p;b>=0;b-=g)yield f(),u(Math.max(0,b-g),b)}),vt(this,void 0,void 0,function*(){if(l===i)return;const f=this.createDelay();for(let b=l;b<i;b+=g)yield f(),u(b,Math.min(i,b+g))})]))})}render(a){return vt(this,void 0,void 0,function*(){this.timeouts.forEach(i=>i()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const t=window.devicePixelRatio||1,d=this.scrollContainer.clientWidth,o=Math.ceil(a.duration*(this.options.minPxPerSec||0));this.isScrollable=o>d;const s=this.options.fillParent&&!this.isScrollable,e=(s?d:o)*t;this.wrapper.style.width=s?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=a,this.emit("render");try{if(this.options.splitChannels)yield Promise.all(Array.from({length:a.numberOfChannels}).map((i,u)=>{var m;const c=Object.assign(Object.assign({},this.options),(m=this.options.splitChannels)===null||m===void 0?void 0:m[u]);return this.renderChannel([a.getChannelData(u)],c,e)}));else{const i=[a.getChannelData(0)];a.numberOfChannels>1&&i.push(a.getChannelData(1)),yield this.renderChannel(i,this.options,e)}}catch{return}this.emit("rendered")})}reRender(){if(!this.audioData)return;const{scrollWidth:a}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&a!==this.scrollContainer.scrollWidth){const{right:d}=this.progressWrapper.getBoundingClientRect();let o=d-t;o*=2,o=o<0?Math.floor(o):Math.ceil(o),o/=2,this.scrollContainer.scrollLeft+=o}}zoom(a){this.options.minPxPerSec=a,this.reRender()}scrollIntoView(a,t=!1){const{scrollLeft:d,scrollWidth:o,clientWidth:s}=this.scrollContainer,e=a*o,i=d,u=d+s,m=s/2;if(this.isDragging)e+30>u?this.scrollContainer.scrollLeft+=30:e-30<i&&(this.scrollContainer.scrollLeft-=30);else{(e<i||e>u)&&(this.scrollContainer.scrollLeft=e-(this.options.autoCenter?m:0));const c=e-d-m;t&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,_=c/o,y=(c+s)/o;this.emit("scroll",_,y)}}renderProgress(a,t){if(isNaN(a))return;const d=100*a;this.canvasWrapper.style.clipPath=`polygon(${d}% 0, 100% 0, 100% 100%, ${d}% 100%)`,this.progressWrapper.style.width=`${d}%`,this.cursor.style.left=`${d}%`,this.cursor.style.transform=`translateX(-${Math.round(d)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(a,t)}exportImage(a,t,d){return vt(this,void 0,void 0,function*(){const o=this.canvasWrapper.querySelectorAll("canvas");if(!o.length)throw new Error("No waveform data");if(d==="dataURL"){const s=Array.from(o).map(e=>e.toDataURL(a,t));return Promise.resolve(s)}return Promise.all(Array.from(o).map(s=>new Promise((e,i)=>{s.toBlob(u=>{u?e(u):i(new Error("Could not export image"))},a,t)})))})}}Xt.MAX_CANVAS_WIDTH=4e3;class nr extends Lt{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class ir extends Lt{constructor(a=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=a,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return vt(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(a){if(this.currentSrc=a,!a)return this.buffer=null,void this.emit("emptied");fetch(a).then(t=>t.arrayBuffer()).then(t=>this.currentSrc!==a?null:this.audioContext.decodeAudioData(t)).then(t=>{this.currentSrc===a&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var a;this.paused&&(this.paused=!1,(a=this.bufferNode)===null||a===void 0||a.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var a;this.paused||(this.paused=!0,(a=this.bufferNode)===null||a===void 0||a.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return vt(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}stopAt(a){var t,d;const o=a-this.currentTime;(t=this.bufferNode)===null||t===void 0||t.stop(this.audioContext.currentTime+o),(d=this.bufferNode)===null||d===void 0||d.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(a){return vt(this,void 0,void 0,function*(){return this.audioContext.setSinkId(a)})}get playbackRate(){var a,t;return(t=(a=this.bufferNode)===null||a===void 0?void 0:a.playbackRate.value)!==null&&t!==void 0?t:1}set playbackRate(a){this.bufferNode&&(this.bufferNode.playbackRate.value=a)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(a){this.emit("seeking"),this.paused?this.playedDuration=a:(this._pause(),this.playedDuration=a,this._play()),this.emit("timeupdate")}get duration(){var a;return((a=this.buffer)===null||a===void 0?void 0:a.duration)||0}get volume(){return this.gainNode.gain.value}set volume(a){this.gainNode.gain.value=a,this.emit("volumechange")}get muted(){return this._muted}set muted(a){this._muted!==a&&(this._muted=a,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(a){return/^(audio|video)\//.test(a)}getGainNode(){return this.gainNode}getChannelData(){const a=[];if(!this.buffer)return a;const t=this.buffer.numberOfChannels;for(let d=0;d<t;d++)a.push(this.buffer.getChannelData(d));return a}}const sr={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class It extends rr{static create(a){return new It(a)}constructor(a){const t=a.media||(a.backend==="WebAudio"?new ir:void 0);super({media:t,mediaControls:a.mediaControls,autoplay:a.autoplay,playbackRate:a.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},sr,a),this.timer=new nr;const d=t?void 0:this.getMediaElement();this.renderer=new Xt(this.options,d),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins(),Promise.resolve().then(()=>{this.emit("init");const o=this.options.url||this.getSrc()||"";(o||this.options.peaks&&this.options.duration)&&this.load(o,this.options.peaks,this.options.duration)})}updateProgress(a=this.getCurrentTime()){return this.renderer.renderProgress(a/this.getDuration(),this.isPlaying()),a}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const a=this.updateProgress();this.emit("timeupdate",a),this.emit("audioprocess",a)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const a=this.updateProgress();this.emit("timeupdate",a)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(a,t)=>{this.options.interact&&(this.seekTo(a),this.emit("interaction",a*this.getDuration()),this.emit("click",a,t))}),this.renderer.on("dblclick",(a,t)=>{this.emit("dblclick",a,t)}),this.renderer.on("scroll",(a,t)=>{const d=this.getDuration();this.emit("scroll",a*d,t*d)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}));{let a;this.subscriptions.push(this.renderer.on("drag",t=>{this.options.interact&&(this.renderer.renderProgress(t),clearTimeout(a),a=setTimeout(()=>{this.seekTo(t)},this.isPlaying()?0:200),this.emit("interaction",t*this.getDuration()),this.emit("drag",t))}))}}initPlugins(){var a;!((a=this.options.plugins)===null||a===void 0)&&a.length&&this.options.plugins.forEach(t=>{this.registerPlugin(t)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(a=>a()),this.mediaSubscriptions=[]}setOptions(a){this.options=Object.assign({},this.options,a),this.renderer.setOptions(this.options),a.audioRate&&this.setPlaybackRate(a.audioRate),a.mediaControls!=null&&(this.getMediaElement().controls=a.mediaControls)}registerPlugin(a){return a._init(this),this.plugins.push(a),this.subscriptions.push(a.once("destroy",()=>{this.plugins=this.plugins.filter(t=>t!==a)})),a}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadAudio(a,t,d,o){return vt(this,void 0,void 0,function*(){if(this.emit("load",a),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!t&&!d){const e=i=>this.emit("loading",i);t=yield er.fetchBlob(a,e,this.options.fetchParams)}this.setSrc(a,t);const s=o||this.getDuration()||(yield new Promise(e=>{this.onceMediaEvent("loadedmetadata",()=>e(this.getDuration()))}));if(d)this.decodedData=pe.createBuffer(d,s||0);else if(t){const e=yield t.arrayBuffer();this.decodedData=yield pe.decode(e,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(a,t,d){return vt(this,void 0,void 0,function*(){yield this.loadAudio(a,void 0,t,d)})}loadBlob(a,t,d){return vt(this,void 0,void 0,function*(){yield this.loadAudio("blob",a,t,d)})}zoom(a){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(a),this.emit("zoom",a)}getDecodedData(){return this.decodedData}exportPeaks({channels:a=2,maxLength:t=8e3,precision:d=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const o=Math.min(a,this.decodedData.numberOfChannels),s=[];for(let e=0;e<o;e++){const i=this.decodedData.getChannelData(e),u=[],m=Math.round(i.length/t);for(let c=0;c<t;c++){const _=i.slice(c*m,(c+1)*m);let y=0;for(let n=0;n<_.length;n++){const p=_[n];Math.abs(p)>Math.abs(y)&&(y=p)}u.push(Math.round(y*d)/d)}s.push(u)}return s}getDuration(){let a=super.getDuration()||0;return a!==0&&a!==1/0||!this.decodedData||(a=this.decodedData.duration),a}toggleInteraction(a){this.options.interact=a}setTime(a){super.setTime(a),this.updateProgress(a)}seekTo(a){const t=this.getDuration()*a;this.setTime(t)}playPause(){return vt(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(a){this.setTime(this.getCurrentTime()+a)}empty(){this.load("",[[0]],.001)}setMediaElement(a){this.unsubscribePlayerEvents(),super.setMediaElement(a),this.initPlayerEvents()}exportImage(a="image/png",t=1,d="dataURL"){return vt(this,void 0,void 0,function*(){return this.renderer.exportImage(a,t,d)})}destroy(){this.emit("destroy"),this.plugins.forEach(a=>a.destroy()),this.subscriptions.forEach(a=>a()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}It.BasePlugin=class extends Lt{constructor(z){super(),this.subscriptions=[],this.options=z}onInit(){}_init(z){this.wavesurfer=z,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(z=>z())}},It.dom=tr;function ge(z){let a,t,d,o,s,e="Export",i,u,m;function c(n){z[22](n)}function _(n){z[23](n)}let y={};return z[2]!==void 0&&(y.layout=z[2]),z[7]!==void 0&&(y.time=z[7]),a=new He({props:y}),Zt.push(()=>ae(a,"layout",c)),Zt.push(()=>ae(a,"time",_)),z[24](a),{c(){_e(a.$$.fragment),o=gt(),s=at("button"),s.textContent=e},l(n){ve(a.$$.fragment,n),o=_t(n),s=ot(n,"BUTTON",{"data-svelte-h":!0}),St(s)!=="svelte-1plq6ya"&&(s.textContent=e)},m(n,p){be(a,n,p),pt(n,o,p),pt(n,s,p),i=!0,u||(m=bt(s,"click",z[10]),u=!0)},p(n,p){const l={};!t&&p&4&&(t=!0,l.layout=n[2],se(()=>t=!1)),!d&&p&128&&(d=!0,l.time=n[7],se(()=>d=!1)),a.$set(l)},i(n){i||(xt(a.$$.fragment,n),i=!0)},o(n){Ot(a.$$.fragment,n),i=!1},d(n){n&&(it(o),it(s)),z[24](null),ye(a,n),u=!1,m()}}}function ar(z){let a,t,d="Soundfile for new project (.mp3)",o,s,e,i="Import existing project (.booty)",u,m,c,_,y="bpm",n,p,l,g,f="delay",b,k,A,E,F="author",P,U,I,W,Y="name",x,B,h,N,$,L,q,Z="<|",tt,R,O="Play/Pause (spacebar)",J,V,X="|>",lt,ft,rt,st,ht,dt,yt,wt,r,D=z[2]&&ge(z);return{c(){a=gt(),t=at("label"),t.textContent=d,o=at("input"),s=gt(),e=at("label"),e.textContent=i,u=at("input"),m=gt(),c=at("div"),_=at("label"),_.textContent=y,n=gt(),p=at("input"),l=gt(),g=at("label"),g.textContent=f,b=gt(),k=at("input"),A=gt(),E=at("label"),E.textContent=F,P=gt(),U=at("input"),I=gt(),W=at("label"),W.textContent=Y,x=gt(),B=at("input"),h=gt(),N=at("div"),$=gt(),L=at("div"),q=at("button"),q.textContent=Z,tt=gt(),R=at("button"),R.textContent=O,J=gt(),V=at("button"),V.textContent=X,lt=gt(),D&&D.c(),ft=gt(),rt=at("img"),ht=at("img"),this.h()},l(C){Be("svelte-ssshy",document.head).forEach(it),a=_t(C),t=ot(C,"LABEL",{for:!0,"data-svelte-h":!0}),St(t)!=="svelte-cexchr"&&(t.textContent=d),o=ot(C,"INPUT",{id:!0,name:!0,accept:!0,type:!0}),s=_t(C),e=ot(C,"LABEL",{for:!0,"data-svelte-h":!0}),St(e)!=="svelte-lnlwk6"&&(e.textContent=i),u=ot(C,"INPUT",{id:!0,name:!0,accept:!0,type:!0}),m=_t(C),c=ot(C,"DIV",{id:!0});var v=Et(c);_=ot(v,"LABEL",{for:!0,"data-svelte-h":!0}),St(_)!=="svelte-1usttzs"&&(_.textContent=y),n=_t(v),p=ot(v,"INPUT",{type:!0,name:!0,id:!0}),l=_t(v),g=ot(v,"LABEL",{for:!0,"data-svelte-h":!0}),St(g)!=="svelte-ax9p3s"&&(g.textContent=f),b=_t(v),k=ot(v,"INPUT",{type:!0,name:!0,id:!0}),A=_t(v),E=ot(v,"LABEL",{for:!0,"data-svelte-h":!0}),St(E)!=="svelte-1kxukma"&&(E.textContent=F),P=_t(v),U=ot(v,"INPUT",{type:!0,name:!0,id:!0}),I=_t(v),W=ot(v,"LABEL",{for:!0,"data-svelte-h":!0}),St(W)!=="svelte-1cvlpim"&&(W.textContent=Y),x=_t(v),B=ot(v,"INPUT",{type:!0,name:!0,id:!0}),v.forEach(it),h=_t(C),N=ot(C,"DIV",{id:!0}),Et(N).forEach(it),$=_t(C),L=ot(C,"DIV",{id:!0});var S=Et(L);q=ot(S,"BUTTON",{"data-svelte-h":!0}),St(q)!=="svelte-12t7hck"&&(q.textContent=Z),tt=_t(S),R=ot(S,"BUTTON",{"data-svelte-h":!0}),St(R)!=="svelte-z6o828"&&(R.textContent=O),J=_t(S),V=ot(S,"BUTTON",{"data-svelte-h":!0}),St(V)!=="svelte-75zcb4"&&(V.textContent=X),S.forEach(it),lt=_t(C),D&&D.l(C),ft=_t(C),rt=ot(C,"IMG",{src:!0,alt:!0}),ht=ot(C,"IMG",{src:!0,alt:!0}),this.h()},h(){document.title="Booty Hero Creation Page",et(t,"for","newSound"),et(o,"id","newSound"),et(o,"name","newSound"),et(o,"accept",".mp3"),et(o,"type","file"),et(e,"for","import"),et(u,"id","import"),et(u,"name","import"),et(u,"accept",".booty"),et(u,"type","file"),et(_,"for","bpm"),et(p,"type","number"),et(p,"name","bpm"),et(p,"id","bpm"),et(g,"for","delay"),et(k,"type","number"),et(k,"name","delay"),et(k,"id","delay"),et(E,"for","author"),et(U,"type","text"),et(U,"name","author"),et(U,"id","author"),et(W,"for","name"),et(B,"type","text"),et(B,"name","name"),et(B,"id","name"),et(c,"id","songSettings"),et(N,"id","wave"),et(L,"id","sound-control"),ie(rt.src,st="./keys2.png")||et(rt,"src",st),et(rt,"alt","Name explanation"),ie(ht.src,dt="./keys.png")||et(ht,"src",dt),et(ht,"alt","Key Shortcuts")},m(C,w){pt(C,a,w),pt(C,t,w),pt(C,o,w),pt(C,s,w),pt(C,e,w),pt(C,u,w),pt(C,m,w),pt(C,c,w),ct(c,_),ct(c,n),ct(c,p),Tt(p,z[4]),ct(c,l),ct(c,g),ct(c,b),ct(c,k),Tt(k,z[3]),ct(c,A),ct(c,E),ct(c,P),ct(c,U),Tt(U,z[5]),ct(c,I),ct(c,W),ct(c,x),ct(c,B),Tt(B,z[6]),pt(C,h,w),pt(C,N,w),pt(C,$,w),pt(C,L,w),ct(L,q),ct(L,tt),ct(L,R),ct(L,J),ct(L,V),pt(C,lt,w),D&&D.m(C,w),pt(C,ft,w),pt(C,rt,w),pt(C,ht,w),yt=!0,wt||(r=[bt(window,"keypress",z[9]),bt(o,"change",z[13]),bt(u,"change",z[14]),bt(p,"input",z[15]),bt(p,"change",z[11]),bt(k,"input",z[16]),bt(k,"change",z[11]),bt(U,"input",z[17]),bt(U,"change",z[11]),bt(B,"input",z[18]),bt(B,"change",z[11]),bt(q,"click",z[19]),bt(R,"click",z[20]),bt(V,"click",z[21])],wt=!0)},p(C,[w]){w&16&&Ht(p.value)!==C[4]&&Tt(p,C[4]),w&8&&Ht(k.value)!==C[3]&&Tt(k,C[3]),w&32&&U.value!==C[5]&&Tt(U,C[5]),w&64&&B.value!==C[6]&&Tt(B,C[6]),C[2]?D?(D.p(C,w),w&4&&xt(D,1)):(D=ge(C),D.c(),xt(D,1),D.m(ft.parentNode,ft)):D&&(Qt(),Ot(D,1,1,()=>{D=null}),$t())},i(C){yt||(xt(D),yt=!0)},o(C){Ot(D),yt=!1},d(C){C&&(it(a),it(t),it(o),it(s),it(e),it(u),it(m),it(c),it(h),it(N),it($),it(L),it(lt),it(ft),it(rt),it(ht)),D&&D.d(C),wt=!1,Pe(r)}}}function or(z,a,t){let d,o,s,e,i=0,u=120,m="",c="",_=0,y="",n;Le(()=>{s=It.create({container:"#wave"})});async function p(L){if(!L||L.length!==1)return;console.log("load project file");let{data:q,music:Z}=await $e(L[0]);s&&s.destroy(),y=Z,s=It.create({container:"#wave",url:Z}),s.on("timeupdate",f),t(2,e=q),t(4,u=e.sections[0].bpm),t(5,m=e.author),t(6,c=e.name),t(3,i=e.delay)}function l(L){L&&L.length==1&&(console.log("sound file loaded",L[0]),s&&s.destroy(),y=URL.createObjectURL(L[0]),s=It.create({container:"#wave",url:y}),s.on("timeupdate",f),s.on("decode",q=>{t(2,e={delay:i,sections:[{bpm:u,end:Math.ceil(q*1e3)/1e3,start:0,notes:{lb:new Set,lc:new Set,ll:new Set,lt:new Set,rb:new Set,rc:new Set,rr:new Set,rt:new Set}}],author:m,name:c})}),t(6,c=L[0].name.substring(0,L[0].name.length-4)))}function g(L){let q="";switch(L.key){case" ":s.playPause();break;case"s":q="lc";break;case"a":q="ll";break;case"w":q="lt";break;case"x":case"y":q="lb";break;case"k":q="rc";break;case"l":q="rr";break;case"i":q="rt";break;case"m":case",":q="rb";break}q&&s.isPlaying()&&n.setNoteThroughKeys(_,q)}function f(L){t(7,_=L)}function b(){Qe(e,y)}function k(){t(2,e.author=m,e),t(2,e.delay=i,e),t(2,e.name=c,e),t(2,e.sections[0].bpm=u,e),t(2,e)}function A(L){if(s)switch(L){case"toggle":s.playPause();break;case"start":s.setTime(0);break;case"end":s.setTime(s.getDuration());break}}function E(){d=this.files,t(0,d)}function F(){o=this.files,t(1,o)}function P(){u=Ht(this.value),t(4,u)}function U(){i=Ht(this.value),t(3,i)}function I(){m=this.value,t(5,m)}function W(){c=this.value,t(6,c)}const Y=()=>A("start"),x=()=>A("toggle"),B=()=>A("end");function h(L){e=L,t(2,e)}function N(L){_=L,t(7,_)}function $(L){Zt[L?"unshift":"push"](()=>{n=L,t(8,n)})}return z.$$.update=()=>{z.$$.dirty&1&&l(d),z.$$.dirty&2&&p(o)},[d,o,e,i,u,m,c,_,n,g,b,k,A,E,F,P,U,I,W,Y,x,B,h,N,$]}class ur extends Yt{constructor(a){super(),Jt(this,a,or,ar,qt,{})}}export{ur as component};
